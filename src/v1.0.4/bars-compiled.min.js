!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Bars=e()}}(function(){var e;return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var p=n[i]={exports:{}};t[i][0].call(p.exports,function(e){var n=t[i][1][e];return o(n?n:e)},p,p.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){t.exports=e("../lib/bars-runtime")},{"../lib/bars-runtime":2}],2:[function(e,t,n){var r=e("generate-js"),o=e("./renderer"),a=e("./compiler/tokens"),i=e("./blocks"),s=e("./transforms"),u=e("../package"),f=r.generate(function(){var e=this;e.defineProperties({blocks:new i,partials:{},transforms:new s})});f.definePrototype({version:u.version,build:function(e,t){var n=this,r=e;return Array.isArray(e)&&(r=new a.tokens.program,r.fromArray(e)),new o(n,r,t)},registerBlock:function(e,t){var n=this;n.blocks[e]=t},registerPartial:function(e,t){var n=this;if("string"==typeof t){if(!n.preCompile)throw"partials must be pre-compiled using bars.preCompile(template)";t=n.preCompile(t,e,null,{minify:!0})}var r=t;Array.isArray(t)&&(r=new a.tokens.program,r.fromArray(t)),n.partials[e]=r},registerTransform:function(e,t){var n=this;n.transforms[e]=t}}),t.exports=f},{"../package":42,"./blocks":3,"./compiler/tokens":8,"./renderer":30,"./transforms":34,"generate-js":41}],3:[function(e,t,n){var r=e("generate-js"),o=r.generate(function(){});o.definePrototype({if:function(e,t,n,r){e[0]?t():n()},with:function(e,t,n,r){var o=e[0];e.length?o&&"object"==typeof o?t(r.newContext(o)):n():t()},each:function(e,t,n,r){var o=e[0];if(o&&"object"==typeof o){var a=Object.keys(o);if(a.length)for(var i=0;i<a.length;i++)t(r.newContext(o[a[i]],{key:a[i],index:i,length:a.length}));else n()}else n()}}),t.exports=o},{"generate-js":41}],4:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null});o.definePrototype({enumerable:!0},{type:"assignment"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression}},_fromArray:function(e){var t=this;t.name=e[1],t.expression=new r.tokens[e[2][0]],t.expression.fromArray(e[2])},toString:function(){}}),r.tokens.assignment=o},{"./token":17}],5:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.nodes=[],t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"attr"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.name=e[1],t.nodes=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[3]},toString:function(){var e=this,t=" ";t+=e.name+(e.nodes.length?'="':"");for(var n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel="",t+=e.nodes[n].toString();return t+=e.nodes.length?'"':""},updates:function(){var e=this;e.nodesUpdate=1}}),r.tokens.attr=o},{"./token":17}],6:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.arguments=null,t.map=null,t.consequent=null,t.alternate=null});o.definePrototype({enumerable:!0},{type:"block"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.arguments,e.map,e.consequent,e.alternate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,arguments:e.arguments,map:e.map,consequent:e.consequent,alternate:e.alternate}},_fromArray:function(e){var t=this;t.name=e[1],t.arguments=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.map=e[3].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t});var n=new r.tokens.fragment;if(n.fromArray(e[4]),t.consequent=n,e[5]){var o=new r.tokens[e[5][0]];o.fromArray(e[5]),t.alternate=o}},toString:function(){var e=this,t="";if(e.fromElse||(t+=e.indentLevel+"{{#"),t+=e.name+" ",t+=e.expression.toString(),t+=e.map?e.map.toString():"",t+="}}",e.consequent.indentLevel=e.indentLevel?e.indentLevel+"  ":"",t+=e.consequent.toString(),e.alternate){if(e.alternate.indentLevel=e.indentLevel,"block"===e.alternate.type)return e.alternate.fromElse=!0,t+=e.indentLevel+"{{else "+e.alternate.toString();e.alternate.indentLevel+=e.indentLevel?e.indentLevel+"  ":"",t+=e.indentLevel+"{{else}}",t+=e.alternate.toString()}return t+=e.indentLevel+"{{/"+e.name+"}}"},updates:function(){var e=this;e.elsed&&e.alternate?e.alternate.nodesUpdate=1:e.consequent&&(e.consequent.nodesUpdate=1)}}),r.tokens.block=o},{"./token":17}],7:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.nodes=[],t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"fragment"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.nodes=e[1].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[2]},toString:function(){for(var e=this,t="",n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel=e.indentLevel,t+=e.nodes[n].toString();return t},updates:function(){var e=this;e.nodesUpdate=1}}),r.tokens.fragment=o},{"./token":17}],8:[function(e,t,n){var r=e("./token");e("./program"),e("./fragment"),e("./text"),e("./tag"),e("./attr"),e("./prop"),e("./block"),e("./insert"),e("./partial"),e("./literal"),e("./value"),e("./transform"),e("./operator"),e("./assignment"),t.exports=r},{"./assignment":4,"./attr":5,"./block":6,"./fragment":7,"./insert":9,"./literal":10,"./operator":11,"./partial":12,"./program":13,"./prop":14,"./tag":15,"./text":16,"./token":17,"./transform":18,"./value":19}],9:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.expression=null});o.definePrototype({enumerable:!0},{type:"insert"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,expression:e.expression}},_fromArray:function(e){var t=this,n=new r.tokens[e[1][0]];n.fromArray(e[1]),t.expression=n},toString:function(){var e=this,t="{{ ";return t+=e.expression.toString(),t+=" }}"}}),r.tokens.insert=o},{"./token":17}],10:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.value=""});o.definePrototype({enumerable:!0},{type:"literal"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.value]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,value:e.value}},_fromArray:function(e){var t=this;t.value=e[1]},toString:function(){var e=this,t="";return t+=e.value}}),r.tokens.literal=o},{"./token":17}],11:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.operator="",t.operands=[]});o.definePrototype({enumerable:!0},{type:"operator"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.operator,e.operands]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,operator:e.operator,operands:e.operands}},_fromArray:function(e){var t=this;t.operator=e[1],t.operands=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t="";return 1===e.operands.length?t+=e.operator+e.operands[0].toString():2===e.operands.length&&(t+=e.operands[0].toString(),t+=" "+e.operator+" ",t+=e.operands[1].toString()),t}}),r.tokens.operator=o},{"./token":17}],12:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null,t.map=null});o.definePrototype({enumerable:!0},{type:"partial"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression,e.map]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression,map:e.map}},_fromArray:function(e){var t=this;if(t.name=e[1],e[2]){var n=new r.tokens[e[2][0]];n.fromArray(e[2]),t.expression=n}t.map=e[3].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t=e.indentLevel+"{{>"+e.name;return t+=e.expression?" "+e.expression.toString():"",t+="}}"}}),r.tokens.partial=o},{"./token":17}],13:[function(e,t,n){var r=e("./token"),o=e("../../../package"),a=r.generate(function(e){var t=this;e&&r.call(t,e),t.version=o.version,t.mode="",t.fragment=null});a.definePrototype({enumerable:!0},{type:"program"}),a.definePrototype({writable:!0},{indentLevel:"\n"}),a.definePrototype({TYPE_ID:r.tokens.push(a)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.version,e.mode,e.fragment]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,version:e.version,mode:e.mode,fragment:e.fragment}},_fromArray:function(e){var t=this;t.version=e[1],t.mode=e[2];var n=new r.tokens.fragment;n.fromArray(e[3]),t.fragment=n},toString:function(){var e=this;return e.fragment.indentLevel=e.indentLevel,e.fragment.toString().trim()+"\n"}}),r.tokens.program=a},{"../../../package":42,"./token":17}],14:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null});o.definePrototype({enumerable:!0},{type:"prop"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression}},_fromArray:function(e){var t=this;t.name=e[1];var n=new r.tokens[e[2][0]];n.fromArray(e[2]),t.expression=n},toString:function(){var e=this,t=e.name+":{{ ";return t+=e.expression.toString(),t+=" }}"}}),r.tokens.prop=o},{"./token":17}],15:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.attrs=[],t.props=[],t.nodes=[],t.attrsUpdate=0,t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"tag"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.attrs,e.attrsUpdate,e.nodes,e.nodesUpdate,e.props]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,attrs:e.attrs,attrsUpdate:e.attrsUpdate,nodes:e.nodes,nodesUpdate:e.nodesUpdate,props:e.props}},_fromArray:function(e){var t=this;t.name=e[1],t.attrs=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.attrsUpdate=e[3],t.nodes=e[4].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[5],t.props=e[6].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){for(var e=this,t=e.indentLevel+"<"+e.name,n=0;n<e.attrs.length;n++)t+=e.attrs[n].toString();if(e.selfClosed)return t+=(e.attrs.length?" ":"")+"/>";if(t+=">",e.selfClosing)return t;var r="";for(n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel=e.indentLevel?e.indentLevel+"  ":"",r+=e.nodes[n].toString();return t+=r.trim(),t+=e.indentLevel+"</"+e.name+">"},updates:function(e){var t=this;"attr"===e?t.attrsUpdate=1:t.nodesUpdate=1}}),r.tokens.tag=o},{"./token":17}],16:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.value=""});o.definePrototype({enumerable:!0},{type:"text"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.value]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,value:e.value}},_fromArray:function(e){var t=this;t.value=e[1]},toString:function(){var e=this,t="";return t+=e.indentLevel+e.value}}),r.tokens.text=o},{"./token":17}],17:[function(e,t,n){var r=e("compileit").Token,o=r.generate(function(e,t){r.call(this,e,t)});o.tokens=[],o.definePrototype({writable:!0},{indentLevel:"",JSONuseObject:!0}),o.definePrototype({TYPE_ID:-1,toJSON:function(e){return this.JSONuseObject?this.toObject():this.toArray()},toArray:function(){return console.warn("toArray not impleneted."),[-1]},toObject:function(){var e=this;return console.warn("toObject not impleneted."),{type:e.type,TYPE_ID:e.TYPE_ID}},fromArray:function(e){var t=this;if(e[0]!==t.TYPE_ID)throw"TypeMismatch: "+e[0]+" is not "+t.TYPE_ID;t._fromArray(e)},updates:function(){console.warn("updates not impleneted.")}}),t.exports=o},{compileit:35}],18:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.arguments=[]});o.definePrototype({enumerable:!0},{type:"transform"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.arguments]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,arguments:e.arguments}},_fromArray:function(e){var t=this;t.name=e[1],t.arguments=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t="@";t+=e.name+"(";for(var n=0;n<e.arguments.length;n++)t+=e.arguments[n].toString()+(n+1<e.arguments.length?", ":"");return t+=")"}}),r.tokens.transform=o},{"./token":17}],19:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.path=""});o.definePrototype({enumerable:!0},{type:"value"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.path]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,path:e.path}},_fromArray:function(e){var t=this;t.path=e[1]},toString:function(){var e=this,t="";return t+="~"===e.path[0]||".."===e.path[0]||"."===e.path[0]||"@"===e.path[0]?e.path.join("/"):e.path.join(".")}}),r.tokens.value=o},{"./token":17}],20:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes"),a=e("../text-renderer").ac;AttrNode=r.generate(function(e,t){r.call(this);var n=this;n.bars=e,n.name=t.name,n.nodes=t.nodes}),AttrNode.definePrototype({isDOM:!0,update:function(e){var t=this;t.val=a(t.nodes,t.bars,e).slice(2,-1),t._elementAppendTo()},_elementAppendTo:function(e){var t=this;e=e||t.getParent(),e=e&&e.$el,e instanceof Element&&e.setAttribute(t.name,t.val)},_elementRemove:function(){var e=this,t=e.parent.$el;t instanceof Element&&t.removeAttribute(e.name)}}),o.attr=AttrNode},{"../text-renderer":29,"./bars-node":21,"./nodes":25}],21:[function(e,t,n){function r(e,t){t.parentNode.insertBefore(e,t.nextSibling)}var o=e("generate-js"),a=o.generate(function(){});a.definePrototype({update:function(e){var t=this,n=t.getParent();t.prevDOM=n&&n.lastUpdated,t._update(e),t._elementAppendTo(),t.isDOM&&n&&(n.lastUpdated=t)},_update:function(){console.warn("_update method not implemented.")},appendChild:function(e){var t=this;t.nodes.push(e),e.parent=t},appendTo:function(e){var t=this;e instanceof Element&&t._elementAppendTo(e),a.isCreation(e)&&e.appendChild(t)},remove:function(){var e=this,t=e.parent.nodes.indexOf(e);t>=0&&e.parent.nodes.splice(t,1),e._elementRemove()},_elementAppendTo:function(e){var t=this;e=e||t.getParent(),e=e&&e.$el,t.prevDOM&&t.prevDOM.$el&&t.prevDOM.$el.nextSibling!==t.$el?r(t.$el,t.prevDOM.$el):e&&e!==t.$el.parentNode&&e.appendChild(t.$el)},_elementRemove:function(){var e=this;e.isDOM&&e.$el.parentNode instanceof Element&&e.$el.parentNode.removeChild(e.$el)},getParent:function(){var e=this,t=e;do t=t.parent;while(t&&!t.isDOM);return t}}),t.exports=a},{"generate-js":41}],22:[function(e,t,n){function r(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o].name]=s(t[o].expression,n.transforms,e);return r}var o=e("./bars-node"),a=e("./nodes"),s=e("../../runtime/execute");BlockNode=o.generate(function(e,t){o.call(this);var n=this,r=t.nodes||[];for(n.bars=e,n.name=t.name,n.arguments=t.arguments,n.map=t.map,n.consequent=t.consequent,n.alternate=t.alternate,n.consMap=new Map,n.altsMap=new Map,n.nodes=[],i=0;i<r.length;i++){var s=r[i];n.appendChild(new a[s.type](e,s))}}),BlockNode.definePrototype({_update:function(e){function t(t){t=t||e,t=t.contextWithVars(r(t,i.map,i.bars)),u.push(t)}function n(t){t&&(t=t.contextWithVars(r(t,i.map,i.bars))),f.push(t||e)}var o,i=this,u=[],f=[],p=i.bars.blocks[i.name];if("function"!=typeof p)throw"Missing Block helper: "+i.name;p(i.arguments.map(function(t){return s(t,i.bars.transforms,e)}),t,n,e);var c=[];if(u.length){for(o=0;o<u.length;o++)c.push(i.consMap.get(u[o].data)||new a[i.consequent.type](i.bars,i.consequent));for(i.consMap.clear(),o=0;o<u.length;o++)i.consMap.set(u[o].data,c[o]);for(o=0;o<i.nodes.length;o++)c.indexOf(i.nodes[o])===-1&&i.nodes[o].remove();for(i.nodes=[],o=0;o<c.length;o++)i.appendChild(c[o]);for(o=0;o<i.nodes.length;o++)i.nodes[o].update(u[o])}else{for(o=0;o<f.length;o++)c.push(i.altsMap.get(f[o])||new a[i.alternate.type](i.bars,i.alternate));for(i.altsMap.clear(),o=0;o<f.length;o++)i.altsMap.set(f[o],c[o]);for(o=0;o<i.nodes.length;o++)c.indexOf(i.nodes[o])===-1&&i.nodes[o].remove();for(i.nodes=[],o=0;o<c.length;o++)i.appendChild(c[o]);for(o=0;o<i.nodes.length;o++)i.nodes[o].update(u[o])}},_elementAppendTo:function(e){var t=this;e=e||t.getParent();for(var n=0;n<t.nodes.length;n++)t.nodes[n]._elementAppendTo(e)},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove()}}),a.block=BlockNode},{"../../runtime/execute":32,"./bars-node":21,"./nodes":25}],23:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes");e("../../runtime/execute");Fragment=r.generate(function(e,t){r.call(this);var n=this,a=t.nodes||[];for(n.nodes=[],i=0;i<a.length;i++){var s=a[i];n.appendChild(new o[s.type](e,s))}}),Fragment.definePrototype({_update:function(e){var t,n=this;for(t=0;t<n.nodes.length;t++)n.nodes[t].update(e)},_elementAppendTo:function(e){var t=this;e=e||t.getParent();for(var n=0;n<t.nodes.length;n++)t.nodes[n]._elementAppendTo(e)},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove()}}),o.fragment=Fragment},{"../../runtime/execute":32,"./bars-node":21,"./nodes":25}],24:[function(e,t,n){var r=e("./nodes");e("./block-node"),e("./partial-node"),e("./fragment-node"),e("./tag-node"),e("./attr-node"),e("./text-node"),t.exports=r},{"./attr-node":20,"./block-node":22,"./fragment-node":23,"./nodes":25,"./partial-node":26,"./tag-node":27,"./text-node":28}],25:[function(e,t,n){var r={};t.exports=r},{}],26:[function(e,t,n){function r(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o].name]=i(t[o].expression,n.transforms,e);return r}var o=e("./bars-node"),a=e("./nodes"),i=e("../../runtime/execute");PartialNode=o.generate(function(e,t){o.call(this);var n=this;t.nodes||[];n.bars=e,n.name=t.name,n.expression=t.expression,n.map=t.map,n.nodes=[],n.fragMap=new Map}),PartialNode.definePrototype({_update:function(e){var t=this,n=t.name;"object"==typeof t.name&&(n=i(t.name,t.bars.transforms,e));var o=t.fragMap.get(n);if(!o){var s=t.bars.partials[n];if(!s)throw"error";o=new a.fragment(t.bars,s.fragment),t.fragMap.set(n,o)}t.expression&&(e=e.newContext(i(t.expression,t.bars.transforms,e),null,!0)),e=e.contextWithVars(r(e,t.map,t.bars)),t.nodes[0]!==o&&(t.nodes[0]&&t.nodes[0].remove(),t.nodes=[],t.appendChild(o)),o.update(e)},_elementAppendTo:function(e){var t=this;e=e||t.getParent();for(var n=0;n<t.nodes.length;n++)t.nodes[n]._elementAppendTo(e)},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove()}}),a.partial=PartialNode},{"../../runtime/execute":32,"./bars-node":21,"./nodes":25}],27:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes"),a=e("../../runtime/execute");TagNode=r.generate(function(e,t){r.call(this);var n,a=this,i=t.nodes||[],s=t.attrs||[];for(a.bars=e,a.$el=document.createElement(t.name),a.attrs=[],a.nodes=[],a.props=t.props||[],n=0;n<i.length;n++){var u=i[n];a.appendChild(new o[u.type](e,u))}for(n=0;n<s.length;n++){var f=s[n];a.addAttr(new o[f.type](e,f))}}),TagNode.definePrototype({isDOM:!0,_update:function(e){var t,n=this,r={};for(t=0;t<n.props.length;t++)r[n.props[t].name]=a(n.props[t].expression,n.bars.transforms,e);for(n.$el.data=function(e){return r[e]},t=0;t<n.attrs.length;t++)n.attrs[t].update(e);for(n.lastUpdated=null,t=0;t<n.nodes.length;t++)n.nodes[t].update(e);n.lastUpdated=null},addAttr:function(e){var t=this;t.attrs.push(e),e.parent=t}}),o.tag=TagNode},{"../../runtime/execute":32,"./bars-node":21,"./nodes":25}],28:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes"),a=e("../../runtime/execute");TextNode=r.generate(function(e,t){r.call(this);var n=this;n.$el=document.createTextNode(t.value),n.bars=e,n.expression=t.expression}),TextNode.definePrototype({isDOM:!0,appendChild:function(e){console.warn("appendChild CANNOT be called on TextNodes.")},_update:function(e){var t=this;t.expression&&(t.$el.textContent=a(t.expression,t.bars.transforms,e))}}),o.text=TextNode,o.insert=TextNode},{"../../runtime/execute":32,"./bars-node":21,"./nodes":25}],29:[function(e,t,n){function r(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o].name]=d(t[o].expression,n.transforms,e);return r}function o(e,t){t=t||0;for(var n="",r=0;r<t;r++)n+=e;return n}function a(e,t,n){function o(o){o=o||n,o=o.contextWithVars(r(o,e.map,t)),s+=i(e.consequent.nodes,t,o)}function a(o){o&&(o=o.contextWithVars(r(o,e.map,t))),s+=i(e.alternate.nodes,t,o||n)}var s="",u=t.blocks[e.name];if("function"!=typeof u)throw"Missing Block helper: "+e.name;return u(e.arguments.map(function(e){return d(e,t.transforms,n)}),o,a,n),s}function i(e,t,n){if(0===e.length)return"";for(var r='="',o=0;o<e.length;o++){var i=e[o];if("text"===i.type)r+=i.value;else if("insert"===i.type){var s=d(i.expression,t.transforms,n);r+=void 0!==s?s:""}else"block"===i.type&&(r+=a(i,t,n))}return r+='"'}function s(e,t,n){var r=" ";return r+=e.name,r+=i(e.nodes,t,n)}function u(e,t,n,o,a){function i(i){i=i||a,i=i.contextWithVars(r(i,e.map,o)),u+=p(e.consequent.nodes,t,n,o,i)}function s(i){i&&(i=i.contextWithVars(r(i,e.map,o))),u+=p(e.alternate.nodes,t,n,o,i||a)}var u="",f=o.blocks[e.name];if("function"!=typeof f)throw"Missing Block helper: "+e.name;return f(e.arguments.map(function(e){return d(e,o.transforms,a)}),i,s,a),u}function f(e,t,n,o,a){var i=e.name;"object"==typeof e.name&&(i=d(e.name,o.transforms,a));var s=o.partials[i];return e.expression&&(a=a.newContext(d(e.expression,o.transforms,a),null,!0)),a=a.contextWithVars(r(a,e.map,o)),p(s.fragment.nodes,t,n,o,a)}function p(e,t,n,r,a){if(0===e.length)return"";var i;if(1===e.length){if("text"===e[0].type)return e[0].value;if("insert"===e[0].type)return i=d(e[0].expression,r.transforms,a),void 0!==i?i:""}for(var s="\n",p=0;p<e.length;p++){var l=e[p];s+=o(t,n+1),"tag"===l.type?s+=c(l,t,n+1,r,a):"text"===l.type?s+=l.value:"insert"===l.type?(i=d(l.expression,r.transforms,a),s+=void 0!==i?i:""):"block"===l.type?s+=u(l,t,n,r,a):"partial"===l.type&&(s+=f(l,t,n,r,a))}return s+=o(t,n)}function c(e,t,n,r,o){var a="";a+="<"+e.name;for(var i=0;i<e.attrs.length;i++)a+=s(e.attrs[i],r,o);return e.isSelfClosing||e.selfClosed?a+=" />":(a+=">",a+=p(e.nodes,t,n,r,o),a+="</"+e.name+">"),a+="\n"}function l(e,t,n,r){return p(e.nodes,t,-1,n,r)}var d=e("../runtime/execute");l.ac=i,t.exports=l},{"../runtime/execute":32}],30:[function(e,t,n){function r(e,t){t=t||0;for(var n="",r=0;r<t;r++)n+=e;return n}var o=e("generate-js"),a=e("./runtime/context-n"),i=e("./render/text-renderer"),s=e("./render/dom-renderer"),u=o.generate(function(e,t,n){var r=this;r.bars=e,r.struct=t,"object"==typeof document&&(r.struct.fragment.name="div",r.dom=new s.tag(r.bars,r.struct.fragment),r.rootNode=r.dom.$el,n&&r.update(n))});u.definePrototype({update:function(e){var t=this;t.dom.update(new a(e))},text:function(e,t){var n=this;t=t||{};var o=r(t.tabs?"\t":" ",t.tabs?1:t.indent);return i(n.struct.fragment,o,n.bars,new a(e))},appendTo:function(e){var t=this;e.appendChild(t.rootNode)}}),t.exports=u},{"./render/dom-renderer":24,"./render/text-renderer":29,"./runtime/context-n":31,"generate-js":41}],31:[function(e,t,n){var r=e("generate-js"),o=e("compileit/lib/utils"),a=r.generate(function(e,t,n,r){var a=this;o.assertTypeError(e,"object"),a.data=e,a.props=t,a.context=n,r||!n?a.vars=Object.create(null):a.vars=Object.create(n.vars)});a.definePrototype({lookup:function(e){var t=this;return"@"===e[0]?t.props?t.props[e[1]]:void 0:"this"===e[0]?t.data:t.vars&&e[0]in t.vars?t.vars[e[0]]:t.data[e[0]]},newContext:function(e,t,n){return new a(e,t,this,n)},contextWithVars:function(e){var t=this,n=new a(t.data,t.props,t);return n.setVars(e),n},setVars:function(e){var t=this;for(var n in e)e.hasOwnProperty(n)&&(t.vars[n]=e[n])}}),t.exports=a},{"compileit/lib/utils":40,"generate-js":41}],32:[function(e,t,n){function r(e,t,n){function r(e){var a,i=[];if("literal"===e.type)a=e.value;else if("value"===e.type)a=n.lookup(e.path);else if("operator"===e.type&&1===e.operands.length)a=o[e.operator](r(e.operands[0]));else if("operator"===e.type&&2===e.operands.length)a="||"===e.operator?r(e.operands[0])||r(e.operands[1]):"&&"===e.operator?r(e.operands[0])&&r(e.operands[1]):o[e.operator](r(e.operands[0]),r(e.operands[1]));else if("transform"===e.type){for(var s=0;s<e.arguments.length;s++)i.push(r(e.arguments[s]));if(!(t[e.name]instanceof Function))throw'Missing Transfrom: "'+e.name+'".';a=t[e.name].apply(null,i)}return a}return e?r(e):n.lookup("this")}var o=e("./logic");t.exports=r},{"./logic":33}],33:[function(e,t,n){n.lookup=function(e,t){return e[t]},n["."]=n.lookup,n.add=function(e,t){return e+t},n.subtract=function(e,t){return e-t},n.multiply=function(e,t){return e*t},n.devide=function(e,t){return e/t},n.mod=function(e,t){return e%t},n["+"]=n.add,n["-"]=n.subtract,n["*"]=n.multiply,n["/"]=n.devide,n["%"]=n.mod,n.not=function(e){return!e},n["!"]=n.not,n.or=function(e,t){return e||t},n.and=function(e,t){return e&&t},n["||"]=n.or,n["&&"]=n.and,n.strictequals=function(e,t){return e===t},n.strictnotequals=function(e,t){return e!==t},n["==="]=n.strictequals,n["!=="]=n.strictnotequals,n.equals=function(e,t){return e==t},n.notequals=function(e,t){return e!=t},n.ltequals=function(e,t){return e<=t},n.gtequals=function(e,t){return e>=t},n["=="]=n.equals,n["!="]=n.notequals,n["<="]=n.ltequals,n[">="]=n.gtequals,n.lt=function(e,t){return e<t},n.gt=function(e,t){return e>t},n["<"]=n.lt,n[">"]=n.gt},{}],34:[function(e,t,n){var r=e("generate-js"),o=r.generate(function(){});o.definePrototype({log:function(){var e=Array.prototype.slice.call(arguments);e.unshift("Bars:"),console.log.apply(console,e)},upperCase:function(e){return String(e).toUpperCase()},lowerCase:function(e){return String(e).toLowerCase()},number:function(e){return Number(e)},string:function(e){return String(e)},reverse:function(e){return e.slice().reverse()},slice:function(e,t,n){return e.slice(t,n)},map:function(e,t){return e.map(function(n){return e[t]})},sort:function(e,t){return e.slice().sort(function(e,n){return t?e[t]<n[t]?-1:e[t]>n[t]?1:0:e<n?-1:e>n?1:0})},sum:function e(t,n){var r,e=0;if(n)for(r=0;r<t.length;r++)e+=t[r][n];else for(r=0;r<t.length;r++)e+=t[r];return e},ave:function(e,t){var n,r=0;if(t)for(n=0;n<e.length;n++)r+=e[n][t];else for(n=0;n<e.length;n++)r+=e[n];return r/e.length}}),t.exports=o},{"generate-js":41}],35:[function(e,t,n){n.Compiler=e("./lib/compiler"),n.Token=e("./lib/token")},{"./lib/compiler":37,"./lib/token":39}],36:[function(e,t,n){var r=e("generate-js"),o=e("./utils"),a=r.generate(function(e,t){var n=this;n.reset(),n._buffer=e,n._file=t});a.definePrototype({reset:function(){var e=this;e.line=1,e.column=1,e._index=0,e._currentLine=0},currentLine:{get:function(){for(var e=this,t="",n=e._currentLine;n<e.length&&(t+=e._buffer[n],10!==e._buffer.codePointAt(n));)n++;return t}},buffer:{get:function(){var e=this;return e._buffer}},index:{get:function(){var e=this;return e._index},set:function(e){var t=this,n=t._index,r=!1;if(e=Math.min(t.length,e),e=Math.max(0,e),n!=e){for(n>e&&(t.reset(),n=t._index),10===t.buffer.codePointAt(n)&&(r=!0,n++);n<=e;n++)r?(t._currentLine=n,t.line++,r=!1):t.column++,10===t.buffer.codePointAt(n)&&(r=!0);t.column=e-t._currentLine+1,t._index=e}}},length:{get:function(){var e=this;return e._buffer.length}},next:function(){var e=this;return e.index++,e.charAt(e.index)},left:{get:function(){var e=this;return e._index<e.length}},charAt:function(e){var t=this;return t._buffer[e]||"EOF"},codePointAt:function(e){var t=this;return t._buffer.codePointAt(e)},slice:function(e,t){var n=this;return n._buffer.slice(e,t)},makeError:function(e,t,n){var r=this;o.assertTypeError(e,"number"),o.assertTypeError(t,"number"),o.assertTypeError(n,"string"),r.index=e;var a,i=r.currentLine,s=t-e,u="\n"===i[i.length-1]?"":"\n";for(a=1;a<r.column;a++)u+=" ";for(s=Math.min(s,i.length-u.length)||1,a=0;a<s;a++)u+="^";return"Syntax Error: "+n+" at "+(r._file?r._file+":":"")+r.line+":"+r.column+"\n\n"+i+u+"\n"}}),t.exports=a},{"./utils":40,"generate-js":41}],37:[function(e,t,n){var r=e("generate-js"),o=e("./scope"),a=e("./token"),i=e("./code-buffer"),s=e("./utils"),u=r.generate(function(e,t){var n=this;n.modeFormater=t.modeFormater||s.varThrough,n.charFormater=t.charFormater||s.varThrough,n.funcFormater=t.funcFormater||s.varThrough,n.typeFormater=t.typeFormater||s.varThrough,n.sourceFormater=t.sourceFormater||s.varThrough,n.parseModes=e,n.scope=new o});u.definePrototype({compile:function(e,t,n,r){var o=this,a=[];if(o.codeBuffer=new i(e,t),o.scope.verbose=r.verbose,r.verbose&&o.scope.printScope(),o.parseMode(n,a,r),r.verbose&&o.scope.printScope(),o.scope.length)throw o.codeBuffer.makeError("Unexpected End Of Input.");return a},parseMode:function(e,t,n){function r(e,t,n){i.parseMode(e,t,n)}var o,i=this,u=i.scope,f=i.codeBuffer,p=i.parseModes[e],c=f.index;if(!p)throw new Error("Mode not found: "+JSON.stringify(e)+".");r.close=function(){this.closed=!0};e:for(;f.left;){for(var l=0;l<p.length;l++){var d=p[l];if(n.verbose&&console.log(s.repeat("  ",u.length+1)+i.modeFormater(e)+" "+i.funcFormater(d.name)+"\n"+s.repeat("  ",u.length+1)+s.bufferSlice(f,5,i.charFormater)),o=d(e,f,t,n,u,r)){if(o instanceof a&&(t.push(o),n.verbose&&console.log(s.repeat("  ",u.length+1)+i.typeFormater(o.constructor.name||o.type)+": "+i.sourceFormater(o.source()))),r.closed){delete r.closed;break e}break}}if(r.closed){delete r.closed;break e}if(c===f.index){if(o=new a(f),o.close(f),o.value=o.source(f),!n.noErrorOnILLEGAL)throw f.makeError(o.range[0],o.range[1],"ILLEGAL Token: "+JSON.stringify(o.source(f)).slice(1,-1));t.push(o)}c=f.index}}}),t.exports=u},{"./code-buffer":36,"./scope":38,"./token":39,"./utils":40,"generate-js":41}],38:[function(e,t,n){var r=e("generate-js"),o=e("./token"),a=e("./utils"),i=r.generate(function(){var e=this;e.defineProperties({_scope:[]})});i.definePrototype({push:function(e){var t=this;return a.assertError(o.isCreation(e),"Invalid Type."),t._scope.push(e),t.verbose&&t.printScope(),t._scope.length},pop:function(){var e=this,t=e._scope.pop();return e.verbose&&e.printScope(),t},close:function(){var e=this,t=e._scope.pop();return t.close(),e.verbose&&e.printScope(),t},printScope:function(){var e=this;console.log(["Main"].concat(e._scope.map(function(e){return e.constructor.name||e.type})).join(" => "))},token:{get:function(){var e=this;return e._scope[e._scope.length-1]}},length:{get:function(){var e=this;return e._scope.length}}}),t.exports=i},{"./token":39,"./utils":40,"generate-js":41}],39:[function(e,t,n){var r=e("generate-js"),o=(e("./utils"),r.generate(function(e,t){var n=this;n.defineProperties({code:e}),n.type=t,n.range=[e.index,e.index+1],n.loc={start:{line:e.line,column:e.column},end:{line:e.line,column:e.column+1}}}));o.definePrototype({writable:!0,enumerable:!0
},{type:"ILLEGAL"}),o.definePrototype({length:{get:function(){return this.range[1]-this.range[0]}},source:function(){var e=this;return e.code.slice(e.range[0],e.range[1])},close:function(){var e=this;if(e.closed)throw new Error("Cannot call close on a closed token.");e.closed=!0,e.code.index>e.range[1]&&(e.range[1]=e.code.index,e.loc.end={line:e.code.line,column:e.code.column})}}),t.exports=o},{"./utils":40,"generate-js":41}],40:[function(e,t,n){function r(e,t){if(!e)throw new Error(t)}function o(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function a(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function i(e){return e}function s(e,t,n){return n=n||i,JSON.stringify(e.slice(Math.max(0,e.index-t),e.index)).slice(1,-1)+n(JSON.stringify(e.charAt(e.index)||"EOF").slice(1,-1))+JSON.stringify(e.slice(e.index+1,Math.min(e.length,e.index+1+t))).slice(1,-1)}n.assertError=r,n.assertTypeError=o,n.repeat=a,n.varThrough=i,n.bufferSlice=s},{}],41:[function(t,n,r){!function(){function t(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function o(e){var t,n;return!!(e&&"object"==typeof e&&(t=Object.getOwnPropertyNames(e).sort(),n=t.length,1===n&&("get"===t[0]&&"function"==typeof e.get||"set"===t[0]&&"function"==typeof e.set)||2===n&&"get"===t[0]&&"function"==typeof e.get&&"set"===t[1]&&"function"==typeof e.set))}function a(e,t,n){var r,a,i,s={},u=n||t,f=n&&t;for(n=u&&"object"==typeof u?u:{},t=f&&"object"==typeof f?f:{},a=Object.getOwnPropertyNames(n),i=a.length,r=0;r<i;r++)o(n[a[r]])?s[a[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,get:n[a[r]].get,set:n[a[r]].set}:s[a[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,writable:!!t.writable,value:n[a[r]]};return Object.defineProperties(e,s),e}function i(){}var s={defineProperties:function(e,t){return a(this,e,t),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},u={isGeneration:function(e){t(e,"function");var n=this;return n.prototype.isPrototypeOf(e.prototype)},isCreation:function(e){var t=this;return e instanceof t},generate:function(e){t(e,"function");var n=this;return a(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(n.prototype)}),a(e,{configurable:!1,enumerable:!1,writable:!1},u),a(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),e},definePrototype:function(e,t){return a(this.prototype,e,t),this}};a(i,{configurable:!1,enumerable:!1,writable:!1},{prototype:i.prototype}),a(i.prototype,{configurable:!1,enumerable:!1,writable:!1},s),a(i,{configurable:!1,enumerable:!1,writable:!1},u),a(i,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(e){return this.isGeneration(e)},toGenerator:function(e,t){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(e,t)},generateFrom:function(e,n){return t(e,"function"),t(n,"function"),a(n,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),a(n,{configurable:!1,enumerable:!1,writable:!1},u),a(n.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:n,generator:n}),a(n.prototype,{configurable:!1,enumerable:!1,writable:!1},s),n}}),Object.freeze(i),Object.freeze(i.prototype),"function"==typeof e&&e.amd?e(function(){return i}):"object"==typeof n&&"object"==typeof r?n.exports=i:window.Generator=i}()},{}],42:[function(e,t,n){t.exports={name:"bars",version:"1.0.4",description:"Bars is a lightweight high performance HTML aware templating engine.",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/Mike96Angelo/Bars.git"},keywords:["bars","render","renderer","rendering","template","templating","html"],author:"Michaelangelo Jong",license:"MIT",bugs:{url:"https://github.com/Mike96Angelo/Bars/issues"},homepage:"https://github.com/Mike96Angelo/Bars#readme",dependencies:{compileit:"^1.0.1","generate-js":"^3.1.2",jquery:"^3.1.1"},devDependencies:{browserify:"^13.1.1",colors:"^1.1.2",gulp:"^3.9.1","gulp-minify":"0.0.14",stringify:"^5.1.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0","virtual-dom":"^2.1.1"}}},{}]},{},[1])(1)});