!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Bars=e()}}(function(){var e;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return o(n?n:e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){t.exports=e("./lib")},{"./lib":46}],2:[function(e,t,n){var r=e("generate-js"),o=e("./renderer"),i=e("./compiler/tokens"),a=e("./blocks"),s=e("./transforms"),u=e("../package"),c=r.generate(function(){var e=this;e.defineProperties({blocks:new a,partials:{},transforms:new s})});c.definePrototype({version:u.version,build:function(e,t){var n=this,r=e;return Array.isArray(e)&&(r=new i.tokens.program,r.fromArray(e)),new o(n,r,t)},registerBlock:function(e,t){var n=this;n.blocks[e]=t},registerPartial:function(e,t){var n=this;if("string"==typeof t){if(!n.preCompile)throw"partials must be pre-compiled using bars.preCompile(template)";t=n.preCompile(t,e,null,{minify:!0})}var r=t;Array.isArray(t)&&(r=new i.tokens.program,r.fromArray(t)),n.partials[e]=r},registerTransform:function(e,t){var n=this;n.transforms[e]=t}}),t.exports=c},{"../package":92,"./blocks":4,"./compiler/tokens":31,"./renderer":57,"./transforms":61,"generate-js":69}],3:[function(e,t,n){var r=e("./bars-runtime"),o=e("./compiler");r.definePrototype({compile:function(e,t,n,r){var o=this;return o.build(o.preCompile(e,t,n,r))},preCompile:function(e,t,n,r){return o(e,t,n,r)}}),t.exports=r},{"./bars-runtime":2,"./compiler":6}],4:[function(e,t,n){var r=e("generate-js"),o=r.generate(function(){});o.definePrototype({if:function(e,t,n,r){e[0]?t():n()},with:function(e,t,n,r){var o=e[0];e.length?o&&"object"==typeof o?t(r.newContext(o)):n():t()},each:function(e,t,n,r){var o=e[0];if(o&&"object"==typeof o){var i=Object.keys(o);if(i.length)for(var a=0;a<i.length;a++)t(r.newContext(o[i[a]],{key:i[a],index:a,length:i.length}));else n()}else n()}}),t.exports=o},{"generate-js":69}],5:[function(e,t,n){function r(e,t,n,r){n=n||"DOM",r=r||{};var o=new a.tokens.program,i=new a.tokens.fragment;return i.nodesUpdate=1,o.mode=n,o.fragment=i,i.nodes=u.compile(e,t,n,r),o}var o=e("compileit"),i=e("./parsers"),a=e("./tokens"),s={TEXT:[i.parseText,i.parseBarsMarkup],BARS:[i.parseBarsComment,i.parseBarsBlock,i.parseBarsPartial,i.parseBarsInsert],DOM:[i.parseText,i.parseHTMLComment,i.parseHTMLTag,i.parseBarsMarkup],ATTR:[i.parseHTMLTagEnd,i.parseWhitspace,i.parseHTMLAttr],VALUE:[i.parseHTMLAttrEnd,i.parseText,i.parseBarsMarkup],LOGIC:[i.parseBarsMarkupEnd,i.parseExpressionLiteral,i.parseExpressionTransform,i.parseExpressionValue,i.parseExpressionOperator,i.parseExpressionAssignment,i.parseWhitspace],"LOGIC-EXP":[i.parseBarsMarkupEnd,i.parseExpressionLiteral,i.parseExpressionTransform,i.parseExpressionValue,i.parseExpressionOperator,i.parseWhitspace],"LOGIC-ARGS":[i.parseExpressionTransformEnd,i.parseExpressionLiteral,i.parseExpressionTransform,i.parseExpressionValue,i.parseExpressionOperator,i.parseWhitspace]},u=new o.Compiler(s,{modeFormater:function(e){return e.green},charFormater:function(e){return e.green.underline},funcFormater:function(e){return e.red},typeFormater:function(e){return e.red},sourceFormater:function(e){return("`"+e+"`").green.underline}});t.exports=r},{"./parsers":24,"./tokens":31,compileit:63}],6:[function(e,t,n){t.exports=e("./compiler")},{"./compiler":5}],7:[function(e,t,n){function r(e,t,n,o,u,c){var p,l,f,d,m,h=t.index+2,v=t.length,g=o.markup.mode;if(47===t.codePointAt(h))f=!0,o.markup.closeParseScope=!0;else{if(!(35===t.codePointAt(h)||u.token&&u.token.alternateIsBlock)){if(101===t.codePointAt(h)&&108===t.codePointAt(++h)&&115===t.codePointAt(++h)&&101===t.codePointAt(++h)){if(d=!0,s.isWhitespace(t.codePointAt(h+1))?(h+=2,m=!0):125===t.codePointAt(++h)&&125===t.codePointAt(++h)&&h++,p=new i(t),t.index=h,p.close(),!i.isCreation(u.token)||u.token.elsed)throw t.makeError(p.range[0],p.range[1],"Unexpected Token: "+JSON.stringify(p.source(t))+".");return u.token.elsed=!0,u.token.alternateIsBlock=m,o.markup.closeParseScope=!0,u.close(),c.close(),!0}return null}l=!0}if(u.token&&u.token.alternateIsBlock?h-=2:h++,p=new i(t),!s.isHTMLIdentifierStart(t.codePointAt(h)))throw t.makeError(h,h+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(h))+".");for(;h<v&&(ch=t.codePointAt(h),s.isHTMLIdentifier(ch));h++)p.name+=t.charAt(h);if(f){if(125!==t.codePointAt(h)||125!==t.codePointAt(++h))throw t.makeError(h,h+1,"Unexpected Token: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(h))+".");if(h++,t.index=h,p.close(),!i.isCreation(u.token))throw t.makeError(p.range[0],p.range[1],"Unexpected Closing Block: "+JSON.stringify(p.source(t))+".");if(u.token.name!==p.name)throw t.makeError(p.range[0],p.range[1],"Mismatch Closing Block: Expected "+JSON.stringify("{{/"+u.token.name+"}}")+" but found "+JSON.stringify(p.source(t))+".");return u.close(),c.close(),!0}s.isWhitespace(t.codePointAt(h))&&h++,t.index=h;var k=[];u.push(p),c("LOGIC",k,o),k=s.makeExpressionTree(k,t);var x=s.sortArgsAndContextMap(k,t);if(p.map=x.map,p.arguments=x.args,k=null,x=null,!p.closed)throw t.makeError(t.index,t.index+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(p.consequent=new a(t),delete p.closed,u.push(p),c(g,p.consequent.nodes,o),h=t.index,p.consequent.close(),t.index=h,p.elsed){if(p.alternateIsBlock)return delete p.closed,u.push(p),o.markup={mode:g},p.alternate=r(e,t,[],o,u,c),delete o.markup,u.close(),p;p.alternate=new a(t),delete p.closed,u.push(p),c(g,p.alternate.nodes,o),h=t.index,p.alternate.close()}if(!p.closed)throw t.makeError(p.range[0],p.range[0]+p.name.length+6+p.expression.length,"Unclosed Block: Expected "+JSON.stringify("{{/"+p.name+"}}")+" to fallow "+JSON.stringify("{{#"+p.name+" <expression>}}")+".");return c.close(),p}var o=e("../tokens"),i=o.tokens.block,a=o.tokens.fragment,s=e("../utils");t.exports=r},{"../tokens":31,"../utils":44}],8:[function(e,t,n){function r(e,t,n,r,o,i){var a=t.index+2,s=t.length;if(33===t.codePointAt(a)){if(45===t.codePointAt(++a)&&45===t.codePointAt(++a)){for(a++;a<s;a++)if(45===t.codePointAt(a)&&45===t.codePointAt(a+1)&&125===t.codePointAt(a+2)&&125===t.codePointAt(a+3))return a+=4,t.index=a,i.close(),r.keepComments,!0;throw t.makeError('Unclosed Comment: Expected "--}}" to fallow "{{!--".',5)}for(a++;a<s;a++)if(125===t.codePointAt(a)&&125===t.codePointAt(a+1))return a+=2,t.index=a,i.close(),r.keepComments,!0;throw t.makeError(t.index,t.index+3,'Unclosed Comment: Expected "}}" to fallow "{{!".')}return null}t.exports=r},{}],9:[function(e,t,n){function r(e,t,n,r,a,s){var u=t.index+2,c=(t.length,new o(t)),p=[];if(a.push(c),t.index=u,s("LOGIC-EXP",p,r),p=i.makeExpressionTree(p,t),p.length>1)throw t.index=p[1].range[0],t.makeError(p[1].range[0],p[1].range[1],"Unexpected Token: "+JSON.stringify(p[1].source(t))+".");if(c.expression=p[0],p=null,!c.closed)throw t.makeError(t.index,t.index+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(!c.expression)throw t.makeError(t.index-2,t.index-1,"Missing <expression>.");return s.close(),c}var o=e("../tokens").tokens.insert,i=e("../utils");t.exports=r},{"../tokens":31,"../utils":44}],10:[function(e,t,n){function r(e,t,n,r,i,a){return 125===t.codePointAt(t.index)&&125===t.codePointAt(t.index+1)&&(o.tokens.insert.isCreation(i.token)||o.tokens.block.isCreation(i.token)||o.tokens.partial.isCreation(i.token)||o.tokens.prop.isCreation(i.token))?(t.index+=2,i.close(),a.close(),!0):null}var o=e("../tokens");t.exports=r},{"../tokens":31}],11:[function(e,t,n){function r(e,t,n,r,o,i){var a=t.index;t.length;if(123===t.codePointAt(a)&&123===t.codePointAt(++a)){if(r.markup={},r.markup.mode=e,i("BARS",n,r),t.index>a)return r.markup&&r.markup.closeParseScope&&i.close(),delete r.markup,o.token&&o.token.updates(),!0;delete r.markup}return null}t.exports=r},{}],12:[function(e,t,n){function r(e,t,n,r,a,s){var u,c=t.index+2,p=t.length,l=!1;if(62===t.codePointAt(c)){if(u=new o(t),c++,63===t.codePointAt(c))l=!0,c++;else{if(!i.isHTMLIdentifierStart(t.codePointAt(c)))throw t.makeError(c,c+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(c))+".");for(;c<p&&(ch=t.codePointAt(c),i.isHTMLIdentifier(ch));c++)u.name+=t.charAt(c)}t.index=c;var f=[];a.push(u),s("LOGIC",f,r),f=i.makeExpressionTree(f,t);var d=i.sortArgsAndContextMap(f,t);if(f=d.args,u.map=d.map,d=null,f.length>(l?2:1))throw t.makeError(f[1].range[0],f[1].range[1],"Unexpected Token: "+JSON.stringify(f[1].source(t))+".");if(l?(u.name=f[0]||null,u.expression=f[1]||null):u.expression=f[0]||null,f=null,!u.closed)throw t.makeError(c,c+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");return s.close(),u}return null}var o=e("../tokens").tokens.partial,i=e("../utils");t.exports=r},{"../tokens":31,"../utils":44}],13:[function(e,t,n){function r(e){return 61===e}function o(e,t,n,o,i,u){var c=t.index;t.length;if(!r(t.codePointAt(c)))return null;var p=new s(t);t.index++,p.close();var l=n[n.length-1];if(!a.isCreation(l))throw t.makeError(p.range[0],p.range[1],"Unexpected Token: "+JSON.stringify(p.source()).slice(1,-1));return p}var i=e("../tokens"),a=i.tokens.value,s=i.tokens.assignment;t.exports=o},{"../tokens":31}],14:[function(e,t,n){function r(e,t,n,r,o,i){var a,s,u=t.index,p=t.length;if(39!==t.codePointAt(u))return null;for(u++,s=new c(t),s.value="";u<p;u++){if(a=t.codePointAt(u),10===a)return t.index=u,null;if(39===a&&92!==t.codePointAt(u-1)){u++;break}s.value+=t.charAt(u)}return u>t.index?(t.index=u,s.close(),s):null}function o(e,t,n,r,o,i){var a,s,u=t.index,p=t.length,l=t.codePointAt(u),f=t.codePointAt(u+1);if(45===l&&48<=f&&f<=57||48<=l&&l<=57){for(u++,number=new c(t);u<p;u++)if(l=t.codePointAt(u),!(48<=l&&l<=57))if(69===l||101===l){if(u++,l=t.codePointAt(u),f=t.codePointAt(u+1),s||!((43===l||45===l)&&48<=f&&f<=57||48<=l&&l<=57))throw t.index=u-1,t.makeError("Unexpected Token: "+JSON.stringify(t.charAt(u-1))+".");s=!0}else{if(46!==l)break;if(u++,l=t.codePointAt(u),s||a||!(48<=l&&l<=57))throw t.index=u-1,t.makeError('Unexpected Token: ".".');a=!0}return t.index=u,number.close(),number.value=Number(number.source(t)),number}return null}function i(e,t,n,r,o,i){var a,s=t.index;if(116===t.codePointAt(s)&&114===t.codePointAt(++s)&&117===t.codePointAt(++s)&&101===t.codePointAt(++s))a=!0;else{if(102!==t.codePointAt(s)||97!==t.codePointAt(++s)||108!==t.codePointAt(++s)||115!==t.codePointAt(++s)||101!==t.codePointAt(++s))return null;a=!1}var u=new c(t);return s++,t.index=s,u.close(),u.value=a,u}function a(e,t,n,r,o,i){var a,s=t.index;return 110!==t.codePointAt(s)||117!==t.codePointAt(++s)||108!==t.codePointAt(++s)||108!==t.codePointAt(++s)?null:(s++,a=new c(t),t.index=s,a.close(),a.value=null,a)}function s(e,t,n,s,u,c){return r(e,t,n,s,u,c)||o(e,t,n,s,u,c)||i(e,t,n,s,u,c)||a(e,t,n,s,u,c)}var u=e("../tokens"),c=u.tokens.literal;u.tokens.operator;t.exports=s},{"../tokens":31}],15:[function(e,t,n){function r(e){return 33===e||37<=e&&e<=38||42<=e&&e<=43||45<=e&&e<=47||60<=e&&e<=62||124===e}function o(e){return 33===e||60<=e&&e<=62}function i(e){return 33===e||61===e}function a(e){return 61===e}function s(e){return 124===e}function u(e){return 38===e}function c(e,t,n,r,o,i){var a,s,u,c,p=t.index;t.length;if((u=40===t.codePointAt(p))||(c=91===t.codePointAt(p))){if(a=new d(t),t.index++,u?a.parentheses=!0:c&&(a.brackets=!0),a.operator=".",s=[],o.push(a),i("LOGIC-EXP",s,r),s=h.makeExpressionTree(s,t),s.length>1)throw"OPERATOR OPERAND MISMATCH";if(a.operands.push(s[0]),u)return s[0];if(c)return a}else if((u=41===t.codePointAt(p))||(c=93===t.codePointAt(p))){if(d.isCreation(o.token)&&(u&&o.token.parentheses||c&&o.token.brackets))return t.index++,o.close(),i.close(),!0;throw t.makeError(p,p+1,"Unexpected token: "+t.charAt(p))}return null}function p(e,t,n,c,p,l){var f=t.index,h=(t.length,t.codePointAt(f));if(!r(h))return null;var v=new d(t);if(o(h)&&a(t.codePointAt(f+1)))f++;else if(a(h))return null;if(s(h)&&s(t.codePointAt(f+1))||u(h)&&u(t.codePointAt(f+1)))f++;else if(s(h)||u(h))throw t.makeError(v.range[0],v.range[1],"Unexpected token: "+JSON.stringify(v.source()).slice(1,-1));i(h)&&a(t.codePointAt(f+1))&&f++,f++,t.index=f,v.close(),v.operator=v.source();var g=n[n.length-1],k=n[n.length-2];if(m.isCreation(g)||"!"!==v.operator&&(!g||!g.saturated&&!g.brackets&&d.isCreation(g))||d.isCreation(g)&&"!"===g.operator&&d.isCreation(k)&&"!"===k.operator)throw t.makeError(v.range[0],v.range[1],"Unexpected token: "+JSON.stringify(v.source()).slice(1,-1));return v}function l(e,t,n,r,o,i){return p(e,t,n,r,o,i)||c(e,t,n,r,o,i)}var f=(e("compileit"),e("../tokens")),d=f.tokens.operator,m=f.tokens.assignment,h=e("../utils");t.exports=l},{"../tokens":31,"../utils":44,compileit:63}],16:[function(e,t,n){function r(e,t,n,r,i,a){return 41===t.codePointAt(t.index)&&o.tokens.transform.isCreation(i.token)?(t.index++,i.close(),a.close(),!0):44===t.codePointAt(t.index)&&o.tokens.transform.isCreation(i.token)?(t.index++,i.token.nextArg=!0,a.close(),!0):null}var o=e("../tokens");t.exports=r},{"../tokens":31}],17:[function(e,t,n){function r(e,t,n,r,o,s){var u,c=t.index,p=t.length,l=t.codePointAt(c);if(64!==l)return null;if(c++,!a.isHTMLIdentifierStart(t.codePointAt(c)))return null;for(u=new i(t);c<p&&(l=t.codePointAt(c),a.isHTMLIdentifier(l));c++)u.name+=t.charAt(c);if(l=t.codePointAt(c),40!==l)return null;for(c++,t.index=c,o.push(u);t.left;){var f=[];if(s("LOGIC-ARGS",f,r),f=a.makeExpressionTree(f,t),f.length>1)throw t.index=f[1].range[0],t.makeError(f[1].range[0],f[1].range[1],"Unexpected Token: "+JSON.stringify(f[1].source(t))+".");if(u.arguments.push(f[0]),u.nextArg&&(delete u.nextArg,delete u.closed),u.closed)break}return u}var o=e("../tokens"),i=o.tokens.transform,a=(o.tokens.operator,e("../utils"));t.exports=r},{"../tokens":31,"../utils":44}],18:[function(e,t,n){function r(e,t,n,r,o,s){var u=t.index,c=t.length,p=t.codePointAt(u),l=64===p;if(!a.isHTMLIdentifierStart(p)&&!l)return null;value=new i(t),value.path=[],l&&(value.path.push("@"),u++);for(var f="";u<c&&(p=t.codePointAt(u),a.isHTMLIdentifier(p));u++)f+=t.charAt(u);if(!f)throw t.makeError(value.range[0],value.range[1],"Unexpected Token: "+JSON.stringify(value.source()).slice(1,-1));return value.path.push(f),t.index=u,value.close(),value}var o=e("../tokens"),i=o.tokens.value,a=(o.tokens.operator,e("../utils"));t.exports=r},{"../tokens":31,"../utils":44}],19:[function(e,t,n){function r(e,t,n,r,o,i){return 34===t.codePointAt(t.index)?(t.index++,o.close(),i.close(),!0):null}t.exports=r},{}],20:[function(e,t,n){function r(e,t,n,r,o,u){var c,p=t.index,l=t.length;if(!s.isHTMLIdentifierStart(t.codePointAt(p)))return null;for(c=new i(t),prop=new a(t);p<l&&s.isHTMLIdentifier(t.codePointAt(p));p++)c.name+=t.charAt(p);if(prop.name=c.name,c.name){if(61===t.codePointAt(p)){if(p++,34!==t.codePointAt(p))throw t.makeError(p,p+1,'Unexpected Token: Expected """ but found '+JSON.stringify(t.charAt(p)));p++,t.index=p,o.push(c),r.whitepaceString=!0,u("VALUE",c.nodes,r),delete r.whitepaceString}else{if(58===t.codePointAt(p)){if(p++,123===t.codePointAt(p)&&123===t.codePointAt(p+1)){var f=[];if(t.index=p+2,o.push(prop),u("LOGIC-EXP",f,r),f=s.makeExpressionTree(f,t),f.length>1)throw t.index=f[1].range[0],t.makeError(f[1].range[0],f[1].range[1],"Unexpected Token: "+JSON.stringify(f[1].source(t))+".");if(prop.expression=f[0],f=null,!prop.closed)throw t.makeError(t.index,t.index+1,"Unclosed Block: Expected "+JSON.stringify("}}")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(!prop.expression)throw t.makeError(t.index-2,t.index-1,"Missing <expression>.");return prop}throw t.makeError(p-1,p,"Unexpected Token: :")}t.index=p,c.close()}if(!c.closed)throw t.makeError(c.range[0]+c.name.length+1,c.range[0]+c.name.length+2,'Unclosed String: Expected """ to fallow """');return o.token&&c.nodesUpdate&&o.token.updates("attr"),c}return null}var o=e("../tokens"),i=o.tokens.attr,a=o.tokens.prop,s=e("../utils");t.exports=r},{"../tokens":31,"../utils":44}],21:[function(e,t,n){function r(e,t,n,r,o,i){var a=t.index,s=t.length;if(60===t.codePointAt(a)&&33===t.codePointAt(++a)&&45===t.codePointAt(++a)&&45===t.codePointAt(++a)){for(a++;a<s;a++)if(45===t.codePointAt(a)&&45===t.codePointAt(a+1)&&62===t.codePointAt(a+2))return a+=3,t.index=a,!0;throw t.makeError(t.index,t.index+4,'Unclosed Comment: Expected "-->" to fallow "<!--".')}return null}t.exports=r},{}],22:[function(e,t,n){function r(e,t,n,r,o,i){var a=t.codePointAt(t.index);if(62===a)return t.index++,o.close(),i.close(),!0;if(47===a&&62===t.codePointAt(t.index+1)){t.index+=2;var s=o.close();return s.selfClosed=!0,i.close(),!0}return null}t.exports=r},{}],23:[function(e,t,n){function r(e,t,n,r,o,c){var p,l,f=t.index,d=t.length;if(60===t.codePointAt(f)){if(47===t.codePointAt(f+1)&&(l=!0,f++),p=new i(t),f++,!u.isHTMLIdentifierStart(t.codePointAt(f)))throw t.makeError(f,f+1,"Unexpected Token: Expected <[A-Za-z]> but found "+JSON.stringify(t.charAt(f))+".");for(;f<d&&(ch=t.codePointAt(f),u.isHTMLIdentifier(ch));f++)p.name+=t.charAt(f);if(t.index=f,l){if(62!==ch)throw t.makeError(f,f+1,"Unexpected Token: Expected "+JSON.stringify(">")+" but found "+JSON.stringify(t.charAt(f))+".");if(f++,t.index=f,p.close(),!i.isCreation(o.token))throw t.makeError(p.range[0],p.range[1],"Unexpected Closing Tag: "+JSON.stringify(p.source(t))+".");if(o.token.name!==p.name)throw t.makeError(p.range[0],p.range[1],"Mismatch Closing Tag: Expected "+JSON.stringify("</"+o.token.name+">")+" but found "+JSON.stringify(p.source(t))+".");return o.close(),c.close(),!0}var m=[];if(o.push(p),c("ATTR",m,r),p.attrs=m.filter(function(e){return a.isCreation(e)}),p.props=m.filter(function(e){return s.isCreation(e)}),m=null,!p.closed)throw t.makeError(f,f+1,"Unclosed Tag: Expected "+JSON.stringify(">")+" but found "+JSON.stringify(t.charAt(t.index))+".");if(u.isSelfClosing(p.name)&&(p.selfClosing=!0),p.selfClosing||p.selfClosed)return p;if(delete p.closed,"pre"!==p.name&&"style"!==p.name&&"script"!==p.name||(r.minify=!1),o.push(p),"style"===p.name||"script"===p.name?(r.textExitTag=p.name,c("TEXT",p.nodes,r),delete r.textExitTag):c(e,p.nodes,r),!p.closed)throw t.makeError(p.range[0],p.range[1],"Unclosed Tag: Expected "+JSON.stringify("</"+p.name+">")+" to fallow "+JSON.stringify(p.source(t))+".");return o.token&&(p.attrsUpdate||p.nodesUpdate)&&o.token.updates(),p}return null}var o=e("../tokens"),i=o.tokens.tag,a=o.tokens.attr,s=o.tokens.prop,u=e("../utils");t.exports=r},{"../tokens":31,"../utils":44}],24:[function(e,t,n){n.parseText=e("./text"),n.parseWhitspace=e("./whitespace"),n.parseHTMLComment=e("./html-comment"),n.parseHTMLTag=e("./html-tag"),n.parseHTMLTagEnd=e("./html-tag-end"),n.parseHTMLAttr=e("./html-attr"),n.parseHTMLAttrEnd=e("./html-attr-end"),n.parseBarsMarkup=e("./bars-markup"),n.parseBarsComment=e("./bars-comment"),n.parseBarsInsert=e("./bars-insert"),n.parseBarsPartial=e("./bars-partial"),n.parseBarsBlock=e("./bars-block"),n.parseBarsMarkupEnd=e("./bars-markup-end"),n.parseExpressionValue=e("./expression-value"),n.parseExpressionLiteral=e("./expression-literal"),n.parseExpressionOperator=e("./expression-operator"),n.parseExpressionAssignment=e("./expression-assignment"),n.parseExpressionTransform=e("./expression-transform"),n.parseExpressionTransformEnd=e("./expression-transform-end")},{"./bars-block":7,"./bars-comment":8,"./bars-insert":9,"./bars-markup":11,"./bars-markup-end":10,"./bars-partial":12,"./expression-assignment":13,"./expression-literal":14,"./expression-operator":15,"./expression-transform":17,"./expression-transform-end":16,"./expression-value":18,"./html-attr":20,"./html-attr-end":19,"./html-comment":21,"./html-tag":23,"./html-tag-end":22,"./text":25,"./whitespace":26}],25:[function(e,t,n){function r(e,t,n,r,a,s){var u,c=t.index,p=!1,l="",f="";if("DOM"===e)for(;c<t.length;c++){if(ch=t.codePointAt(c),60===ch||123===ch&&123===t.codePointAt(c+1)){f+=l;break}38!==ch?p&&59===ch?(l+=t.charAt(c),f+=i.getHTMLUnEscape(l),p=!1,l=""):p&&i.isHTMLEntity(ch)?l+=t.charAt(c):(f+=l,p=!1,l="",f+=t.charAt(c)):(p=!0,l=t.charAt(c))}else if(r.whitepaceString)for(;c<t.length;c++){if(ch=t.codePointAt(c),10===ch)return t.index=c,null;if(34===ch&&92!==t.codePointAt(c-1))break;if(123===ch&&123===t.codePointAt(c+1))break}else for(;c<t.length&&(123!==t.codePointAt(c)||123!==t.codePointAt(c+1));c++){if("script"===r.textExitTag&&60===t.codePointAt(c)&&47===t.codePointAt(c+1)&&115===t.codePointAt(c+2)&&99===t.codePointAt(c+3)&&114===t.codePointAt(c+4)&&105===t.codePointAt(c+5)&&112===t.codePointAt(c+6)&&116===t.codePointAt(c+7)&&62===t.codePointAt(c+8)){u=9;break}if("style"===r.textExitTag&&60===t.codePointAt(c)&&47===t.codePointAt(c+1)&&115===t.codePointAt(c+2)&&116===t.codePointAt(c+3)&&121===t.codePointAt(c+4)&&108===t.codePointAt(c+5)&&101===t.codePointAt(c+6)&&62===t.codePointAt(c+7)){u=8;break}}if(t.index<c){var d=new o(t);if(t.index=c,d.close(),r.minify){if(d.value=i.minifyHTMLText(f||d.source(t)),/^\s*$/.test(d.value))return!0}else d.value=f||d.source(t);return r.textExitTag&&u&&(t.index+=u,a.close(),s.close()),d}return null}var o=e("../tokens").tokens.text,i=e("../utils");t.exports=r},{"../tokens":31,"../utils":44}],26:[function(e,t,n){function r(e,t,n,r,i,a){for(var s=t.index,u=t.length,c=0;s<u&&o.isWhitespace(t.codePointAt(s))&&(!r.whitepaceString||10!==t.codePointAt(s));s++)c++;return c?(t.index=s,!0):null}var o=e("../utils");t.exports=r},{"../utils":44}],27:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null});o.definePrototype({enumerable:!0},{type:"assignment"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression}},_fromArray:function(e){var t=this;t.name=e[1],t.expression=new r.tokens[e[2][0]],t.expression.fromArray(e[2])},toString:function(){}}),r.tokens.assignment=o},{"./token":40}],28:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.nodes=[],t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"attr"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.name=e[1],t.nodes=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[3]},toString:function(){var e=this,t=" ";t+=e.name+(e.nodes.length?'="':"");for(var n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel="",t+=e.nodes[n].toString();return t+=e.nodes.length?'"':""},updates:function(){var e=this;e.nodesUpdate=1}}),r.tokens.attr=o},{"./token":40}],29:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.arguments=null,t.map=null,t.consequent=null,t.alternate=null});o.definePrototype({enumerable:!0},{type:"block"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.arguments,e.map,e.consequent,e.alternate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,arguments:e.arguments,map:e.map,consequent:e.consequent,alternate:e.alternate}},_fromArray:function(e){var t=this;t.name=e[1],t.arguments=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.map=e[3].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t});var n=new r.tokens.fragment;if(n.fromArray(e[4]),t.consequent=n,e[5]){var o=new r.tokens[e[5][0]];o.fromArray(e[5]),t.alternate=o}},toString:function(){var e=this,t="";if(e.fromElse||(t+=e.indentLevel+"{{#"),t+=e.name+" ",t+=e.expression.toString(),t+=e.map?e.map.toString():"",t+="}}",e.consequent.indentLevel=e.indentLevel?e.indentLevel+"  ":"",t+=e.consequent.toString(),e.alternate){if(e.alternate.indentLevel=e.indentLevel,"block"===e.alternate.type)return e.alternate.fromElse=!0,t+=e.indentLevel+"{{else "+e.alternate.toString();e.alternate.indentLevel+=e.indentLevel?e.indentLevel+"  ":"",t+=e.indentLevel+"{{else}}",t+=e.alternate.toString()}return t+=e.indentLevel+"{{/"+e.name+"}}"},updates:function(){var e=this;e.elsed&&e.alternate?e.alternate.nodesUpdate=1:e.consequent&&(e.consequent.nodesUpdate=1)}}),r.tokens.block=o},{"./token":40}],30:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.nodes=[],t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"fragment"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.nodes,e.nodesUpdate]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,nodes:e.nodes,nodesUpdate:e.nodesUpdate}},_fromArray:function(e){var t=this;t.nodes=e[1].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[2]},toString:function(){for(var e=this,t="",n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel=e.indentLevel,t+=e.nodes[n].toString();return t},updates:function(){var e=this;e.nodesUpdate=1}}),r.tokens.fragment=o},{"./token":40}],31:[function(e,t,n){var r=e("./token");e("./program"),e("./fragment"),e("./text"),e("./tag"),e("./attr"),e("./prop"),e("./block"),e("./insert"),e("./partial"),e("./literal"),e("./value"),e("./transform"),e("./operator"),e("./assignment"),t.exports=r},{"./assignment":27,"./attr":28,"./block":29,"./fragment":30,"./insert":32,"./literal":33,"./operator":34,"./partial":35,"./program":36,"./prop":37,"./tag":38,"./text":39,"./token":40,"./transform":41,"./value":42}],32:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.expression=null});o.definePrototype({enumerable:!0},{type:"insert"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,expression:e.expression}},_fromArray:function(e){var t=this,n=new r.tokens[e[1][0]];n.fromArray(e[1]),t.expression=n},toString:function(){var e=this,t="{{ ";return t+=e.expression.toString(),t+=" }}"}}),r.tokens.insert=o},{"./token":40}],33:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.value=""});o.definePrototype({enumerable:!0},{type:"literal"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.value]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,value:e.value}},_fromArray:function(e){var t=this;t.value=e[1]},toString:function(){var e=this,t="";return t+=e.value}}),r.tokens.literal=o},{"./token":40}],34:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.operator="",t.operands=[]});o.definePrototype({enumerable:!0},{type:"operator"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.operator,e.operands]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,operator:e.operator,operands:e.operands}},_fromArray:function(e){var t=this;t.operator=e[1],t.operands=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t="";return 1===e.operands.length?t+=e.operator+e.operands[0].toString():2===e.operands.length&&(t+=e.operands[0].toString(),t+=" "+e.operator+" ",t+=e.operands[1].toString()),t}}),r.tokens.operator=o},{"./token":40}],35:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null,t.map=null});o.definePrototype({enumerable:!0},{type:"partial"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression,e.map]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression,map:e.map}},_fromArray:function(e){var t=this;if(t.name=e[1],e[2]){var n=new r.tokens[e[2][0]];n.fromArray(e[2]),t.expression=n}t.map=e[3].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t=e.indentLevel+"{{>"+e.name;return t+=e.expression?" "+e.expression.toString():"",t+="}}"}}),r.tokens.partial=o},{"./token":40}],36:[function(e,t,n){var r=e("./token"),o=e("../../../package"),i=r.generate(function(e){var t=this;e&&r.call(t,e),t.version=o.version,t.mode="",t.fragment=null});i.definePrototype({enumerable:!0},{type:"program"}),i.definePrototype({writable:!0},{indentLevel:"\n"}),i.definePrototype({TYPE_ID:r.tokens.push(i)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.version,e.mode,e.fragment]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,version:e.version,mode:e.mode,fragment:e.fragment}},_fromArray:function(e){var t=this;t.version=e[1],t.mode=e[2];var n=new r.tokens.fragment;n.fromArray(e[3]),t.fragment=n},toString:function(){var e=this;return e.fragment.indentLevel=e.indentLevel,e.fragment.toString().trim()+"\n"}}),r.tokens.program=i},{"../../../package":92,"./token":40}],37:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.expression=null});o.definePrototype({enumerable:!0},{type:"prop"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.expression]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,expression:e.expression}},_fromArray:function(e){var t=this;t.name=e[1];var n=new r.tokens[e[2][0]];n.fromArray(e[2]),t.expression=n},toString:function(){var e=this,t=e.name+":{{ ";return t+=e.expression.toString(),t+=" }}"}}),r.tokens.prop=o},{"./token":40}],38:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.attrs=[],t.props=[],t.nodes=[],t.attrsUpdate=0,t.nodesUpdate=0});o.definePrototype({enumerable:!0},{type:"tag"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.attrs,e.attrsUpdate,e.nodes,e.nodesUpdate,e.props]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,attrs:e.attrs,attrsUpdate:e.attrsUpdate,nodes:e.nodes,nodesUpdate:e.nodesUpdate,props:e.props}},_fromArray:function(e){var t=this;t.name=e[1],t.attrs=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.attrsUpdate=e[3],t.nodes=e[4].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t}),t.nodesUpdate=e[5],t.props=e[6].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){for(var e=this,t=e.indentLevel+"<"+e.name,n=0;n<e.attrs.length;n++)t+=e.attrs[n].toString();if(e.selfClosed)return t+=(e.attrs.length?" ":"")+"/>";if(t+=">",e.selfClosing)return t;var r="";for(n=0;n<e.nodes.length;n++)e.nodes[n].indentLevel=e.indentLevel?e.indentLevel+"  ":"",r+=e.nodes[n].toString();return t+=r.trim(),t+=e.indentLevel+"</"+e.name+">"},updates:function(e){var t=this;"attr"===e?t.attrsUpdate=1:t.nodesUpdate=1}}),r.tokens.tag=o},{"./token":40}],39:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.value=""});o.definePrototype({enumerable:!0},{type:"text"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.value]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,value:e.value}},_fromArray:function(e){var t=this;t.value=e[1]},toString:function(){var e=this,t="";return t+=e.indentLevel+e.value;
}}),r.tokens.text=o},{"./token":40}],40:[function(e,t,n){var r=e("compileit").Token,o=r.generate(function(e,t){r.call(this,e,t)});o.tokens=[],o.definePrototype({writable:!0},{indentLevel:"",JSONuseObject:!0}),o.definePrototype({TYPE_ID:-1,toJSON:function(e){return this.JSONuseObject?this.toObject():this.toArray()},toArray:function(){return console.warn("toArray not impleneted."),[-1]},toObject:function(){var e=this;return console.warn("toObject not impleneted."),{type:e.type,TYPE_ID:e.TYPE_ID}},fromArray:function(e){var t=this;if(e[0]!==t.TYPE_ID)throw"TypeMismatch: "+e[0]+" is not "+t.TYPE_ID;t._fromArray(e)},updates:function(){console.warn("updates not impleneted.")}}),t.exports=o},{compileit:63}],41:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.name="",t.arguments=[]});o.definePrototype({enumerable:!0},{type:"transform"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.name,e.arguments]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,name:e.name,arguments:e.arguments}},_fromArray:function(e){var t=this;t.name=e[1],t.arguments=e[2].map(function(e){var t=new r.tokens[e[0]];return t.fromArray(e),t})},toString:function(){var e=this,t="@";t+=e.name+"(";for(var n=0;n<e.arguments.length;n++)t+=e.arguments[n].toString()+(n+1<e.arguments.length?", ":"");return t+=")"}}),r.tokens.transform=o},{"./token":40}],42:[function(e,t,n){var r=e("./token"),o=r.generate(function(e){var t=this;e&&r.call(t,e),t.path=""});o.definePrototype({enumerable:!0},{type:"value"}),o.definePrototype({TYPE_ID:r.tokens.push(o)-1,toArray:function(){var e=this;return[e.TYPE_ID,e.path]},toObject:function(){var e=this;return{type:e.type,TYPE_ID:e.TYPE_ID,path:e.path}},_fromArray:function(e){var t=this;t.path=e[1]},toString:function(){var e=this,t="";return t+="~"===e.path[0]||".."===e.path[0]||"."===e.path[0]||"@"===e.path[0]?e.path.join("/"):e.path.join(".")}}),r.tokens.value=o},{"./token":40}],43:[function(e,t,n){t.exports={quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,euro:8364}},{}],44:[function(e,t,n){function r(e){var t;if(e instanceof Array)t=e;else{if("string"!=typeof e)throw"bad arrgument: expected String | Array<String>.";t=e.match(/[\/]|[.][.]/)?e.split("/"):e.split("."),t[0]||t[1]||(t=["."]);var n=t.pop().split("@");n[0]&&t.push(n[0]),n[1]&&t.push("@"+n[1])}return t}function o(e){return g.indexOf(e)!==-1}function i(e){return 65<=e&&e<=90||97<=e&&e<=122}function a(e){return 48<=e&&e<=57||65<=e&&e<=90||97<=e&&e<=122}function s(e){return 45===e||48<=e&&e<=57||65<=e&&e<=90||95===e||97<=e&&e<=122}function u(e){return 9<=e&&e<=13||32===e||160===e||5760===e||6158===e||8192<=e&&e<=8202||8232<=e&&e<=8233||8239===e||8287===e||12288===e||65279===e}function c(e){return e.replace(/(\s*)/g,function(e){return e.split("").sort(function(e,t){return e=e.codePointAt(0),t=t.codePointAt(0),160!==e&&160===t?1:160===e&&160!==t?-1:0}).join("").replace(/[^\u00a0]+/," ")})}function p(e){var t;return t=k[e.slice(1,-1)],"number"!=typeof t&&"#"===e[1]&&(t=parseInt(e.slice(2,-1),10)),"number"!=typeof t||isNaN(t)?e:String.fromCharCode(t)}function l(e,t){for(var n=0;n<e.length;n++){prevToken=e[n-1],token=e[n],nextToken=e[n+1];var r=3;if(A.isCreation(token)&&"."===token.operator&&!token.saturated){if(A.isCreation(prevToken)&&!prevToken.saturated)throw t.makeError(token.range[0],token.range[2],"Unexpected token: "+JSON.stringify(token.source()).slice(1,-1));if(token.operands.unshift(prevToken),1===token.operands.length){if(!h(nextToken))throw t.makeError(token.range[0],token.range[2],"Unexpected token: "+JSON.stringify(token.source()).slice(1,-1));var o=new b(t);o.range=nextToken.range,o.loc=nextToken.loc,o.value=nextToken.path[0],o.closed=!0,token.operands.push(o)}else r=2;token.saturated=!0,e.splice(Math.max(0,n-1),r,token),n--}}}function f(e,t){for(var n=e.length-1;n>=0;n--)if(token=e[n],nextToken=e[n+1],A.isCreation(token)&&"!"===token.operator){if(A.isCreation(nextToken)&&!nextToken.saturated)throw console.log(token),t.makeError(token.range[0],token.range[2],"Unexpected token: "+JSON.stringify(token.source()).slice(1,-1));token.operands.push(nextToken),token.saturated=!0,e.splice(n,2,token)}}function d(e,t,n){for(var r=0;r<e.length;r++)if(prevToken=e[r-1],token=e[r],nextToken=e[r+1],A.isCreation(token)&&!token.saturated&&E[t].indexOf(token.operator)!==-1){if(A.isCreation(prevToken)&&!prevToken.saturated)throw n.makeError(token.range[0],token.range[2],"Unexpected token: "+JSON.stringify(token.source()).slice(1,-1));if(token.operands.push(prevToken),A.isCreation(nextToken)&&!nextToken.saturated)throw n.makeError(token.range[0],token.range[2],"Unexpected token: "+JSON.stringify(token.source()).slice(1,-1));token.operands.push(nextToken),token.saturated=!0,e.splice(r-1,3,token),r--}}function m(e,t){l(e,t),f(e,t);for(var n in E)E.hasOwnProperty(n)&&d(e,n,t);return e}function h(e){return P.isCreation(e)&&1===e.path.length&&"this"!==e.path[0]&&"~"!==e.path[0]&&".."!==e.path[0]&&"."!==e.path[0]&&"@"!==e.path[0]}function v(e,t){var n,r,o,i;for(n=0;n<e.length;n++)if(r=e[n-1],o=e[n],i=e[n+1],y.isCreation(o)){if(!h(r))throw t.makeError(o.range[0],o.range[2],"Unexpected token: "+JSON.stringify(o.source()).slice(1,-1));if(o.name=r.path[0],y.isCreation(i))throw t.makeError(o.range[0],o.range[2],"Unexpected token: "+JSON.stringify(o.source()).slice(1,-1));o.expression=i,e.splice(n-1,3,o)}var a=[],s=[];for(n=0;n<e.length;n++)y.isCreation(e[n])?a.push(e[n]):s.push(e[n]);return{args:s,map:a}}var g=e("./self-closing-tags"),k=e("./html-entities"),x=e("../tokens"),y=x.tokens.assignment,b=x.tokens.literal,P=x.tokens.value,A=x.tokens.operator;n.pathSpliter=r,n.isSelfClosing=o,n.isHTMLIdentifierStart=i,n.isHTMLEntity=a,n.isHTMLIdentifier=s,n.isWhitespace=u,n.minifyHTMLText=c,n.getHTMLUnEscape=p;var E={dm:["/","%","*"],as:["+","-"],c:["===","==","!==","!=","<=",">=",">","<"],ao:["||","&&"]};n.makeExpressionTree=m,n.sortArgsAndContextMap=v},{"../tokens":31,"./html-entities":43,"./self-closing-tags":45}],45:[function(e,t,n){t.exports=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]},{}],46:[function(e,t,n){t.exports=e("./bars")},{"./bars":3}],47:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes"),i=e("../text-renderer").ac;AttrNode=r.generate(function(e,t){r.call(this);var n=this;n.bars=e,n.name=t.name,n.nodes=t.nodes}),AttrNode.definePrototype({isDOM:!0,update:function(e){var t=this;t.val=i(t.nodes,t.bars,e).slice(2,-1),t._elementAppendTo()},_elementAppendTo:function(e){var t=this;e=e||t.getParent(),e=e&&e.$el,e instanceof Element&&e.setAttribute(t.name,t.val)},_elementRemove:function(){var e=this,t=e.parent.$el;t instanceof Element&&t.removeAttribute(e.name)}}),o.attr=AttrNode},{"../text-renderer":56,"./bars-node":48,"./nodes":52}],48:[function(e,t,n){function r(e,t){t.parentNode.insertBefore(e,t.nextSibling)}var o=e("generate-js"),i=o.generate(function(){});i.definePrototype({update:function(e){var t=this,n=t.getParent();t.prevDOM=n&&n.lastUpdated,t._update(e),t._elementAppendTo(),t.isDOM&&n&&(n.lastUpdated=t)},_update:function(){console.warn("_update method not implemented.")},appendChild:function(e){var t=this;t.nodes.push(e),e.parent=t},appendTo:function(e){var t=this;e instanceof Element&&t._elementAppendTo(e),i.isCreation(e)&&e.appendChild(t)},remove:function(){var e=this,t=e.parent.nodes.indexOf(e);t>=0&&e.parent.nodes.splice(t,1),e._elementRemove()},_elementAppendTo:function(e){var t=this;e=e||t.getParent(),e=e&&e.$el,t.prevDOM&&t.prevDOM.$el&&t.prevDOM.$el.nextSibling!==t.$el?r(t.$el,t.prevDOM.$el):e&&e!==t.$el.parentNode&&e.appendChild(t.$el)},_elementRemove:function(){var e=this;e.isDOM&&e.$el.parentNode instanceof Element&&e.$el.parentNode.removeChild(e.$el)},getParent:function(){var e=this,t=e;do t=t.parent;while(t&&!t.isDOM);return t}}),t.exports=i},{"generate-js":69}],49:[function(e,t,n){function r(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o].name]=s(t[o].expression,n.transforms,e);return r}var o=e("./bars-node"),a=e("./nodes"),s=e("../../runtime/execute");BlockNode=o.generate(function(e,t){o.call(this);var n=this,r=t.nodes||[];for(n.bars=e,n.name=t.name,n.arguments=t.arguments,n.map=t.map,n.consequent=t.consequent,n.alternate=t.alternate,n.consMap=new Map,n.altsMap=new Map,n.nodes=[],i=0;i<r.length;i++){var s=r[i];n.appendChild(new a[s.type](e,s))}}),BlockNode.definePrototype({_update:function(e){function t(t){t=t||e,t=t.contextWithVars(r(t,i.map,i.bars)),u.push(t)}function n(t){t&&(t=t.contextWithVars(r(t,i.map,i.bars))),c.push(t||e)}var o,i=this,u=[],c=[],p=i.bars.blocks[i.name];if("function"!=typeof p)throw"Missing Block helper: "+i.name;p(i.arguments.map(function(t){return s(t,i.bars.transforms,e)}),t,n,e);var l=[];if(u.length){for(o=0;o<u.length;o++)l.push(i.consMap.get(u[o].data)||new a[i.consequent.type](i.bars,i.consequent));for(i.consMap.clear(),o=0;o<u.length;o++)i.consMap.set(u[o].data,l[o]);for(o=0;o<i.nodes.length;o++)l.indexOf(i.nodes[o])===-1&&i.nodes[o].remove();for(i.nodes=[],o=0;o<l.length;o++)i.appendChild(l[o]);for(o=0;o<i.nodes.length;o++)i.nodes[o].update(u[o])}else{for(o=0;o<c.length;o++)l.push(i.altsMap.get(c[o])||new a[i.alternate.type](i.bars,i.alternate));for(i.altsMap.clear(),o=0;o<c.length;o++)i.altsMap.set(c[o],l[o]);for(o=0;o<i.nodes.length;o++)l.indexOf(i.nodes[o])===-1&&i.nodes[o].remove();for(i.nodes=[],o=0;o<l.length;o++)i.appendChild(l[o]);for(o=0;o<i.nodes.length;o++)i.nodes[o].update(u[o])}},_elementAppendTo:function(e){var t=this;e=e||t.getParent();for(var n=0;n<t.nodes.length;n++)t.nodes[n]._elementAppendTo(e)},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove()}}),a.block=BlockNode},{"../../runtime/execute":59,"./bars-node":48,"./nodes":52}],50:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes");e("../../runtime/execute");Fragment=r.generate(function(e,t){r.call(this);var n=this,a=t.nodes||[];for(n.nodes=[],i=0;i<a.length;i++){var s=a[i];n.appendChild(new o[s.type](e,s))}}),Fragment.definePrototype({_update:function(e){var t,n=this;for(t=0;t<n.nodes.length;t++)n.nodes[t].update(e)},_elementAppendTo:function(e){var t=this;e=e||t.getParent();for(var n=0;n<t.nodes.length;n++)t.nodes[n]._elementAppendTo(e)},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove()}}),o.fragment=Fragment},{"../../runtime/execute":59,"./bars-node":48,"./nodes":52}],51:[function(e,t,n){var r=e("./nodes");e("./block-node"),e("./partial-node"),e("./fragment-node"),e("./tag-node"),e("./attr-node"),e("./text-node"),t.exports=r},{"./attr-node":47,"./block-node":49,"./fragment-node":50,"./nodes":52,"./partial-node":53,"./tag-node":54,"./text-node":55}],52:[function(e,t,n){var r={};t.exports=r},{}],53:[function(e,t,n){function r(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o].name]=a(t[o].expression,n.transforms,e);return r}var o=e("./bars-node"),i=e("./nodes"),a=e("../../runtime/execute");PartialNode=o.generate(function(e,t){o.call(this);var n=this;t.nodes||[];n.bars=e,n.name=t.name,n.expression=t.expression,n.map=t.map,n.nodes=[],n.fragMap=new Map}),PartialNode.definePrototype({_update:function(e){var t=this,n=t.name;"object"==typeof t.name&&(n=a(t.name,t.bars.transforms,e));var o=t.fragMap.get(n);if(!o){var s=t.bars.partials[n];if(!s)throw"error";o=new i.fragment(t.bars,s.fragment),t.fragMap.set(n,o)}t.expression&&(e=e.newContext(a(t.expression,t.bars.transforms,e),null,!0)),e=e.contextWithVars(r(e,t.map,t.bars)),t.nodes[0]!==o&&(t.nodes[0]&&t.nodes[0].remove(),t.nodes=[],t.appendChild(o)),o.update(e)},_elementAppendTo:function(e){var t=this;e=e||t.getParent();for(var n=0;n<t.nodes.length;n++)t.nodes[n]._elementAppendTo(e)},_elementRemove:function(){for(var e=this,t=0;t<e.nodes.length;t++)e.nodes[t]._elementRemove()}}),i.partial=PartialNode},{"../../runtime/execute":59,"./bars-node":48,"./nodes":52}],54:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes"),i=e("../../runtime/execute");TagNode=r.generate(function(e,t){r.call(this);var n,i=this,a=t.nodes||[],s=t.attrs||[];for(i.bars=e,i.$el=document.createElement(t.name),i.attrs=[],i.nodes=[],i.props=t.props||[],n=0;n<a.length;n++){var u=a[n];i.appendChild(new o[u.type](e,u))}for(n=0;n<s.length;n++){var c=s[n];i.addAttr(new o[c.type](e,c))}}),TagNode.definePrototype({isDOM:!0,_update:function(e){var t,n=this,r={};for(t=0;t<n.props.length;t++)r[n.props[t].name]=i(n.props[t].expression,n.bars.transforms,e);for(n.$el.data=function(e){return r[e]},t=0;t<n.attrs.length;t++)n.attrs[t].update(e);for(n.lastUpdated=null,t=0;t<n.nodes.length;t++)n.nodes[t].update(e);n.lastUpdated=null},addAttr:function(e){var t=this;t.attrs.push(e),e.parent=t}}),o.tag=TagNode},{"../../runtime/execute":59,"./bars-node":48,"./nodes":52}],55:[function(e,t,n){var r=e("./bars-node"),o=e("./nodes"),i=e("../../runtime/execute");TextNode=r.generate(function(e,t){r.call(this);var n=this;n.$el=document.createTextNode(t.value),n.bars=e,n.expression=t.expression}),TextNode.definePrototype({isDOM:!0,appendChild:function(e){console.warn("appendChild CANNOT be called on TextNodes.")},_update:function(e){var t=this;t.expression&&(t.$el.textContent=i(t.expression,t.bars.transforms,e))}}),o.text=TextNode,o.insert=TextNode},{"../../runtime/execute":59,"./bars-node":48,"./nodes":52}],56:[function(e,t,n){function r(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o].name]=d(t[o].expression,n.transforms,e);return r}function o(e,t){t=t||0;for(var n="",r=0;r<t;r++)n+=e;return n}function i(e,t,n){function o(o){o=o||n,o=o.contextWithVars(r(o,e.map,t)),s+=a(e.consequent.nodes,t,o)}function i(o){o&&(o=o.contextWithVars(r(o,e.map,t))),s+=a(e.alternate.nodes,t,o||n)}var s="",u=t.blocks[e.name];if("function"!=typeof u)throw"Missing Block helper: "+e.name;return u(e.arguments.map(function(e){return d(e,t.transforms,n)}),o,i,n),s}function a(e,t,n){if(0===e.length)return"";for(var r='="',o=0;o<e.length;o++){var a=e[o];if("text"===a.type)r+=a.value;else if("insert"===a.type){var s=d(a.expression,t.transforms,n);r+=void 0!==s?s:""}else"block"===a.type&&(r+=i(a,t,n))}return r+='"'}function s(e,t,n){var r=" ";return r+=e.name,r+=a(e.nodes,t,n)}function u(e,t,n,o,i){function a(a){a=a||i,a=a.contextWithVars(r(a,e.map,o)),u+=p(e.consequent.nodes,t,n,o,a)}function s(a){a&&(a=a.contextWithVars(r(a,e.map,o))),u+=p(e.alternate.nodes,t,n,o,a||i)}var u="",c=o.blocks[e.name];if("function"!=typeof c)throw"Missing Block helper: "+e.name;return c(e.arguments.map(function(e){return d(e,o.transforms,i)}),a,s,i),u}function c(e,t,n,o,i){var a=e.name;"object"==typeof e.name&&(a=d(e.name,o.transforms,i));var s=o.partials[a];return e.expression&&(i=i.newContext(d(e.expression,o.transforms,i),null,!0)),i=i.contextWithVars(r(i,e.map,o)),p(s.fragment.nodes,t,n,o,i)}function p(e,t,n,r,i){if(0===e.length)return"";var a;if(1===e.length){if("text"===e[0].type)return e[0].value;if("insert"===e[0].type)return a=d(e[0].expression,r.transforms,i),void 0!==a?a:""}for(var s="\n",p=0;p<e.length;p++){var f=e[p];s+=o(t,n+1),"tag"===f.type?s+=l(f,t,n+1,r,i):"text"===f.type?s+=f.value:"insert"===f.type?(a=d(f.expression,r.transforms,i),s+=void 0!==a?a:""):"block"===f.type?s+=u(f,t,n,r,i):"partial"===f.type&&(s+=c(f,t,n,r,i))}return s+=o(t,n)}function l(e,t,n,r,o){var i="";i+="<"+e.name;for(var a=0;a<e.attrs.length;a++)i+=s(e.attrs[a],r,o);return e.isSelfClosing||e.selfClosed?i+=" />":(i+=">",i+=p(e.nodes,t,n,r,o),i+="</"+e.name+">"),i+="\n"}function f(e,t,n,r){return p(e.nodes,t,-1,n,r)}var d=e("../runtime/execute");f.ac=a,t.exports=f},{"../runtime/execute":59}],57:[function(e,t,n){function r(e,t){t=t||0;for(var n="",r=0;r<t;r++)n+=e;return n}var o=e("generate-js"),i=e("./runtime/context-n"),a=e("./render/text-renderer"),s=e("./render/dom-renderer"),u=(e("virtual-dom/diff"),e("virtual-dom/patch"),e("virtual-dom/create-element"),o.generate(function(e,t,n){var r=this;r.bars=e,r.struct=t,r.struct.fragment.name="div",r.dom=new s.tag(r.bars,r.struct.fragment),r.rootNode=r.dom.$el,n&&r.update(n)}));u.definePrototype({update:function(e){var t=this;t.dom.update(new i(e))},text:function(e,t){var n=this;t=t||{};var o=r(t.tabs?"\t":" ",t.tabs?1:t.indent);return a(n.struct.fragment,o,n.bars,new i(e))},appendTo:function(e){var t=this;e.appendChild(t.rootNode)}}),t.exports=u},{"./render/dom-renderer":51,"./render/text-renderer":56,"./runtime/context-n":58,"generate-js":69,"virtual-dom/create-element":72,"virtual-dom/diff":73,"virtual-dom/patch":74}],58:[function(e,t,n){var r=e("generate-js"),o=r.generate(function(e,t,n,r){var o=this;o.data=e,o.props=t,o.context=n,r||!n?o.vars=Object.create(null):o.vars=Object.create(n.vars)});o.definePrototype({lookup:function(e){var t=this;return"@"===e[0]?t.props[e[1]]:"this"===e[0]?t.data:e[0]in t.vars?t.vars[e[0]]:t.data[e[0]]},newContext:function(e,t,n){return new o(e,t,this,n)},contextWithVars:function(e){var t=this,n=new o(t.data,t.props,t);return n.setVars(e),n},setVars:function(e){var t=this;for(var n in e)e.hasOwnProperty(n)&&(t.vars[n]=e[n])}}),t.exports=o},{"generate-js":69}],59:[function(e,t,n){function r(e,t,n){function r(e){var i,a=[];if("literal"===e.type)i=e.value;else if("value"===e.type)i=n.lookup(e.path);else if("operator"===e.type&&1===e.operands.length)i=o[e.operator](r(e.operands[0]));else if("operator"===e.type&&2===e.operands.length)i="||"===e.operator?r(e.operands[0])||r(e.operands[1]):"&&"===e.operator?r(e.operands[0])&&r(e.operands[1]):o[e.operator](r(e.operands[0]),r(e.operands[1]));else if("transform"===e.type){for(var s=0;s<e.arguments.length;s++)a.push(r(e.arguments[s]));if(!(t[e.name]instanceof Function))throw'Missing Transfrom: "'+e.name+'".';i=t[e.name].apply(null,a)}return i}return e?r(e):n.lookup(".")}var o=e("./logic");t.exports=r},{"./logic":60}],60:[function(e,t,n){n.lookup=function(e,t){return e[t]},n["."]=n.lookup,n.add=function(e,t){return e+t},n.subtract=function(e,t){return e-t},n.multiply=function(e,t){return e*t},n.devide=function(e,t){return e/t},n.mod=function(e,t){return e%t},n["+"]=n.add,n["-"]=n.subtract,n["*"]=n.multiply,n["/"]=n.devide,n["%"]=n.mod,n.not=function(e){return!e},n["!"]=n.not,n.or=function(e,t){return e||t},n.and=function(e,t){return e&&t},n["||"]=n.or,n["&&"]=n.and,n.strictequals=function(e,t){return e===t},n.strictnotequals=function(e,t){return e!==t},n["==="]=n.strictequals,n["!=="]=n.strictnotequals,n.equals=function(e,t){return e==t},n.notequals=function(e,t){return e!=t},n.ltequals=function(e,t){return e<=t},n.gtequals=function(e,t){return e>=t},n["=="]=n.equals,n["!="]=n.notequals,n["<="]=n.ltequals,n[">="]=n.gtequals,n.lt=function(e,t){return e<t},n.gt=function(e,t){return e>t},n["<"]=n.lt,n[">"]=n.gt},{}],61:[function(e,t,n){var r=e("generate-js"),o=r.generate(function(){});o.definePrototype({log:function(){var e=Array.prototype.slice.call(arguments);e.unshift("Bars:"),console.log.apply(console,e)},upperCase:function(e){return String(e).toUpperCase()},lowerCase:function(e){return String(e).toLowerCase()},number:function(e){return Number(e)},string:function(e){return String(e)},reverse:function(e){return e.slice().reverse()},slice:function(e,t,n){return e.slice(t,n)},map:function(e,t){return e.map(function(n){return e[t]})},sort:function(e,t){return e.slice().sort(function(e,n){return t?e[t]<n[t]?-1:e[t]>n[t]?1:0:e<n?-1:e>n?1:0})},sum:function e(t,n){var r,e=0;if(n)for(r=0;r<t.length;r++)e+=t[r][n];else for(r=0;r<t.length;r++)e+=t[r];return e},ave:function(e,t){var n,r=0;if(t)for(n=0;n<e.length;n++)r+=e[n][t];else for(n=0;n<e.length;n++)r+=e[n];return r/e.length}}),t.exports=o},{"generate-js":69}],62:[function(e,t,n){},{}],63:[function(e,t,n){n.Compiler=e("./lib/compiler"),n.Token=e("./lib/token")},{"./lib/compiler":65,"./lib/token":67}],64:[function(e,t,n){var r=e("generate-js"),o=e("./utils"),i=r.generate(function(e,t){var n=this;n.reset(),n._buffer=e,n._file=t});i.definePrototype({reset:function(){var e=this;e.line=1,e.column=1,e._index=0,e._currentLine=0},currentLine:{get:function(){for(var e=this,t="",n=e._currentLine;n<e.length&&(t+=e._buffer[n],10!==e._buffer.codePointAt(n));)n++;return t}},buffer:{get:function(){var e=this;return e._buffer}},index:{get:function(){var e=this;return e._index},set:function(e){var t=this,n=t._index,r=!1;if(e=Math.min(t.length,e),e=Math.max(0,e),n!=e){for(n>e&&(t.reset(),n=t._index),10===t.buffer.codePointAt(n)&&(r=!0,n++);n<=e;n++)r?(t._currentLine=n,t.line++,r=!1):t.column++,10===t.buffer.codePointAt(n)&&(r=!0);t.column=e-t._currentLine+1,t._index=e}}},length:{get:function(){var e=this;return e._buffer.length}},next:function(){var e=this;return e.index++,e.charAt(e.index)},left:{get:function(){var e=this;return e._index<e.length}},charAt:function(e){var t=this;return t._buffer[e]||"EOF"},codePointAt:function(e){var t=this;return t._buffer.codePointAt(e)},slice:function(e,t){var n=this;return n._buffer.slice(e,t)},makeError:function(e,t,n){var r=this;o.assertTypeError(e,"number"),o.assertTypeError(t,"number"),o.assertTypeError(n,"string"),r.index=e;var i,a=r.currentLine,s=t-e,u="\n"===a[a.length-1]?"":"\n";for(i=1;i<r.column;i++)u+=" ";for(s=Math.min(s,a.length-u.length)||1,i=0;i<s;i++)u+="^";return"Syntax Error: "+n+" at "+(r._file?r._file+":":"")+r.line+":"+r.column+"\n\n"+a+u+"\n"}}),t.exports=i},{"./utils":68,"generate-js":69}],65:[function(e,t,n){var r=e("generate-js"),o=e("./scope"),i=e("./token"),a=e("./code-buffer"),s=e("./utils"),u=r.generate(function(e,t){var n=this;n.modeFormater=t.modeFormater||s.varThrough,n.charFormater=t.charFormater||s.varThrough,n.funcFormater=t.funcFormater||s.varThrough,n.typeFormater=t.typeFormater||s.varThrough,n.sourceFormater=t.sourceFormater||s.varThrough,n.parseModes=e,n.scope=new o});u.definePrototype({compile:function(e,t,n,r){var o=this,i=[];if(o.codeBuffer=new a(e,t),o.scope.verbose=r.verbose,r.verbose&&o.scope.printScope(),o.parseMode(n,i,r),r.verbose&&o.scope.printScope(),o.scope.length)throw o.codeBuffer.makeError("Unexpected End Of Input.");return i},parseMode:function(e,t,n){function r(e,t,n){a.parseMode(e,t,n)}var o,a=this,u=a.scope,c=a.codeBuffer,p=a.parseModes[e],l=c.index;if(!p)throw new Error("Mode not found: "+JSON.stringify(e)+".");r.close=function(){this.closed=!0};e:for(;c.left;){for(var f=0;f<p.length;f++){var d=p[f];if(n.verbose&&console.log(s.repeat("  ",u.length+1)+a.modeFormater(e)+" "+a.funcFormater(d.name)+"\n"+s.repeat("  ",u.length+1)+s.bufferSlice(c,5,a.charFormater)),o=d(e,c,t,n,u,r)){if(o instanceof i&&(t.push(o),n.verbose&&console.log(s.repeat("  ",u.length+1)+a.typeFormater(o.constructor.name||o.type)+": "+a.sourceFormater(o.source()))),r.closed){delete r.closed;break e}break}}if(r.closed){delete r.closed;break e}if(l===c.index){if(o=new i(c),o.close(c),o.value=o.source(c),!n.noErrorOnILLEGAL)throw c.makeError(o.range[0],o.range[1],"ILLEGAL Token: "+JSON.stringify(o.source(c)).slice(1,-1));t.push(o)}l=c.index}}}),t.exports=u},{"./code-buffer":64,"./scope":66,"./token":67,"./utils":68,"generate-js":69}],66:[function(e,t,n){var r=e("generate-js"),o=e("./token"),i=e("./utils"),a=r.generate(function(){var e=this;e.defineProperties({_scope:[]})});a.definePrototype({push:function(e){var t=this;return i.assertError(o.isCreation(e),"Invalid Type."),t._scope.push(e),t.verbose&&t.printScope(),t._scope.length},pop:function(){var e=this,t=e._scope.pop();return e.verbose&&e.printScope(),t},close:function(){var e=this,t=e._scope.pop();return t.close(),e.verbose&&e.printScope(),t},printScope:function(){var e=this;console.log(["Main"].concat(e._scope.map(function(e){return e.constructor.name||e.type})).join(" => "))},token:{get:function(){var e=this;return e._scope[e._scope.length-1]}},length:{get:function(){var e=this;return e._scope.length}}}),t.exports=a},{"./token":67,"./utils":68,"generate-js":69}],67:[function(e,t,n){var r=e("generate-js"),o=(e("./utils"),r.generate(function(e,t){var n=this;n.defineProperties({code:e}),n.type=t,n.range=[e.index,e.index+1],n.loc={start:{line:e.line,column:e.column},end:{line:e.line,column:e.column+1}}}));o.definePrototype({writable:!0,enumerable:!0},{type:"ILLEGAL"}),o.definePrototype({length:{get:function(){return this.range[1]-this.range[0]}},source:function(){var e=this;return e.code.slice(e.range[0],e.range[1])},close:function(){var e=this;if(e.closed)throw new Error("Cannot call close on a closed token.");e.closed=!0,e.code.index>e.range[1]&&(e.range[1]=e.code.index,e.loc.end={line:e.code.line,column:e.code.column})}}),t.exports=o},{"./utils":68,"generate-js":69}],68:[function(e,t,n){function r(e,t){if(!e)throw new Error(t)}function o(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function i(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function a(e){return e}function s(e,t,n){return n=n||a,JSON.stringify(e.slice(Math.max(0,e.index-t),e.index)).slice(1,-1)+n(JSON.stringify(e.charAt(e.index)||"EOF").slice(1,-1))+JSON.stringify(e.slice(e.index+1,Math.min(e.length,e.index+1+t))).slice(1,-1)}n.assertError=r,n.assertTypeError=o,n.repeat=i,n.varThrough=a,n.bufferSlice=s},{}],69:[function(t,n,r){!function(){function t(e,t){if(typeof e!==t)throw new TypeError("Expected '"+t+"' but instead found '"+typeof e+"'")}function o(e){var t,n;return!!(e&&"object"==typeof e&&(t=Object.getOwnPropertyNames(e).sort(),n=t.length,1===n&&("get"===t[0]&&"function"==typeof e.get||"set"===t[0]&&"function"==typeof e.set)||2===n&&"get"===t[0]&&"function"==typeof e.get&&"set"===t[1]&&"function"==typeof e.set))}function i(e,t,n){var r,i,a,s={},u=n||t,c=n&&t;for(n=u&&"object"==typeof u?u:{},t=c&&"object"==typeof c?c:{},i=Object.getOwnPropertyNames(n),a=i.length,r=0;r<a;r++)o(n[i[r]])?s[i[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,get:n[i[r]].get,set:n[i[r]].set}:s[i[r]]={configurable:!!t.configurable,enumerable:!!t.enumerable,writable:!!t.writable,value:n[i[r]]};return Object.defineProperties(e,s),e}function a(){}var s={defineProperties:function(e,t){return i(this,e,t),this},getProto:function(){return Object.getPrototypeOf(this)},getSuper:function(){return Object.getPrototypeOf(this.constructor.prototype)}},u={isGeneration:function(e){t(e,"function");var n=this;return n.prototype.isPrototypeOf(e.prototype)},isCreation:function(e){var t=this;return e instanceof t},generate:function(e){t(e,"function");var n=this;return i(e,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(n.prototype)}),i(e,{configurable:!1,enumerable:!1,writable:!1},u),i(e.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:e,generator:e}),e},definePrototype:function(e,t){return i(this.prototype,e,t),this}};i(a,{configurable:!1,enumerable:!1,writable:!1},{prototype:a.prototype}),i(a.prototype,{configurable:!1,enumerable:!1,writable:!1},s),i(a,{configurable:!1,enumerable:!1,writable:!1},u),i(a,{configurable:!1,enumerable:!1,writable:!1},{isGenerator:function(e){return this.isGeneration(e)},toGenerator:function(e,t){return console.warn("Generator.toGenerator is depreciated please use Generator.generateFrom"),this.generateFrom(e,t)},generateFrom:function(e,n){return t(e,"function"),t(n,"function"),i(n,{configurable:!1,enumerable:!1,writable:!1},{prototype:Object.create(e.prototype)}),i(n,{configurable:!1,enumerable:!1,writable:!1},u),i(n.prototype,{configurable:!1,enumerable:!1,writable:!1},{constructor:n,generator:n}),i(n.prototype,{configurable:!1,enumerable:!1,writable:!1},s),n}}),Object.freeze(a),Object.freeze(a.prototype),"function"==typeof e&&e.amd?e(function(){return a}):"object"==typeof n&&"object"==typeof r?n.exports=a:window.Generator=a}()},{}],70:[function(e,t,n){(function(n){var r="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},o=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var i=r["__GLOBAL_DOCUMENT_CACHE@4"];i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=o),t.exports=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":62}],71:[function(e,t,n){"use strict";t.exports=function(e){return"object"==typeof e&&null!==e}},{}],72:[function(e,t,n){var r=e("./vdom/create-element.js");t.exports=r},{"./vdom/create-element.js":76}],73:[function(e,t,n){var r=e("./vtree/diff.js");t.exports=r},{"./vtree/diff.js":90}],74:[function(e,t,n){var r=e("./vdom/patch.js");t.exports=r},{"./vdom/patch.js":79}],75:[function(e,t,n){function r(e,t,n){for(var r in t){var a=t[r];void 0===a?o(e,r,a,n):u(a)?(o(e,r,a,n),a.hook&&a.hook(e,r,n?n[r]:void 0)):s(a)?i(e,t,n,r,a):e[r]=a}}function o(e,t,n,r){if(r){var o=r[t];if(u(o))o.unhook&&o.unhook(e,t,n);else if("attributes"===t)for(var i in o)e.removeAttribute(i);else if("style"===t)for(var a in o)e.style[a]="";else"string"==typeof o?e[t]="":e[t]=null}}function i(e,t,n,r,o){var i=n?n[r]:void 0;if("attributes"!==r){if(i&&s(i)&&a(i)!==a(o))return void(e[r]=o);s(e[r])||(e[r]={});var u="style"===r?"":void 0;for(var c in o){var p=o[c];e[r][c]=void 0===p?u:p}}else for(var l in o){var f=o[l];void 0===f?e.removeAttribute(l):e.setAttribute(l,f)}}function a(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var s=e("is-object"),u=e("../vnode/is-vhook.js");t.exports=r},{"../vnode/is-vhook.js":83,"is-object":71}],76:[function(e,t,n){function r(e,t){var n=t?t.document||o:o,p=t?t.warn:null;if(e=c(e).a,u(e))return e.init();if(s(e))return n.createTextNode(e.text);if(!a(e))return p&&p("Item is not a valid virtual dom node",e),null;var l=null===e.namespace?n.createElement(e.tagName):n.createElementNS(e.namespace,e.tagName),f=e.properties;i(l,f);for(var d=e.children,m=0;m<d.length;m++){var h=r(d[m],t);h&&l.appendChild(h)}return l}var o=e("global/document"),i=e("./apply-properties"),a=e("../vnode/is-vnode.js"),s=e("../vnode/is-vtext.js"),u=e("../vnode/is-widget.js"),c=e("../vnode/handle-thunk.js");t.exports=r},{"../vnode/handle-thunk.js":81,"../vnode/is-vnode.js":84,"../vnode/is-vtext.js":85,"../vnode/is-widget.js":86,"./apply-properties":75,"global/document":70}],77:[function(e,t,n){function r(e,t,n,r){return n&&0!==n.length?(n.sort(a),o(e,t,n,r,0)):{}}function o(e,t,n,r,a){if(r=r||{},e){i(n,a,a)&&(r[a]=e);var u=t.children;if(u)for(var c=e.childNodes,p=0;p<t.children.length;p++){a+=1;var l=u[p]||s,f=a+(l.count||0);i(n,a,f)&&o(c[p],l,n,r,a),a=f}}return r}function i(e,t,n){if(0===e.length)return!1;for(var r,o,i=0,a=e.length-1;i<=a;){if(r=(a+i)/2>>0,o=e[r],i===a)return o>=t&&o<=n;if(o<t)i=r+1;else{if(!(o>n))return!0;a=r-1}}return!1}function a(e,t){return e>t?1:-1}var s={};t.exports=r},{}],78:[function(e,t,n){function r(e,t,n){var r=e.type,c=e.vNode,d=e.patch;switch(r){case m.REMOVE:return o(t,c);case m.INSERT:return i(t,d,n);case m.VTEXT:return a(t,c,d,n);case m.WIDGET:return s(t,c,d,n);case m.VNODE:return u(t,c,d,n);case m.ORDER:return p(t,d),t;case m.PROPS:return f(t,d,c.properties),t;case m.THUNK:return l(t,n.patch(t,d,n));default:return t}}function o(e,t){var n=e.parentNode;return n&&n.removeChild(e),c(e,t),null}function i(e,t,n){var r=n.render(t,n);return e&&e.appendChild(r),
e}function a(e,t,n,r){var o;if(3===e.nodeType)e.replaceData(0,e.length,n.text),o=e;else{var i=e.parentNode;o=r.render(n,r),i&&o!==e&&i.replaceChild(o,e)}return o}function s(e,t,n,r){var o,i=h(t,n);o=i?n.update(t,e)||e:r.render(n,r);var a=e.parentNode;return a&&o!==e&&a.replaceChild(o,e),i||c(e,t),o}function u(e,t,n,r){var o=e.parentNode,i=r.render(n,r);return o&&i!==e&&o.replaceChild(i,e),i}function c(e,t){"function"==typeof t.destroy&&d(t)&&t.destroy(e)}function p(e,t){for(var n,r,o,i=e.childNodes,a={},s=0;s<t.removes.length;s++)r=t.removes[s],n=i[r.from],r.key&&(a[r.key]=n),e.removeChild(n);for(var u=i.length,c=0;c<t.inserts.length;c++)o=t.inserts[c],n=a[o.key],e.insertBefore(n,o.to>=u++?null:i[o.to])}function l(e,t){return e&&t&&e!==t&&e.parentNode&&e.parentNode.replaceChild(t,e),t}var f=e("./apply-properties"),d=e("../vnode/is-widget.js"),m=e("../vnode/vpatch.js"),h=e("./update-widget");t.exports=r},{"../vnode/is-widget.js":86,"../vnode/vpatch.js":88,"./apply-properties":75,"./update-widget":80}],79:[function(e,t,n){function r(e,t,n){return n=n||{},n.patch=n.patch&&n.patch!==r?n.patch:o,n.render=n.render||c,n.patch(e,t,n)}function o(e,t,n){var r=a(t);if(0===r.length)return e;var o=p(e,t.a,r),u=e.ownerDocument;n.document||u===s||(n.document=u);for(var c=0;c<r.length;c++){var l=r[c];e=i(e,o[l],t[l],n)}return e}function i(e,t,n,r){if(!t)return e;var o;if(u(n))for(var i=0;i<n.length;i++)o=l(n[i],t,r),t===e&&(e=o);else o=l(n,t,r),t===e&&(e=o);return e}function a(e){var t=[];for(var n in e)"a"!==n&&t.push(Number(n));return t}var s=e("global/document"),u=e("x-is-array"),c=e("./create-element"),p=e("./dom-index"),l=e("./patch-op");t.exports=r},{"./create-element":76,"./dom-index":77,"./patch-op":78,"global/document":70,"x-is-array":91}],80:[function(e,t,n){function r(e,t){return!(!o(e)||!o(t))&&("name"in e&&"name"in t?e.id===t.id:e.init===t.init)}var o=e("../vnode/is-widget.js");t.exports=r},{"../vnode/is-widget.js":86}],81:[function(e,t,n){function r(e,t){var n=e,r=t;return u(t)&&(r=o(t,e)),u(e)&&(n=o(e,null)),{a:n,b:r}}function o(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(i(n)||a(n)||s(n)))throw new Error("thunk did not return a valid node");return n}var i=e("./is-vnode"),a=e("./is-vtext"),s=e("./is-widget"),u=e("./is-thunk");t.exports=r},{"./is-thunk":82,"./is-vnode":84,"./is-vtext":85,"./is-widget":86}],82:[function(e,t,n){function r(e){return e&&"Thunk"===e.type}t.exports=r},{}],83:[function(e,t,n){function r(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}t.exports=r},{}],84:[function(e,t,n){function r(e){return e&&"VirtualNode"===e.type&&e.version===o}var o=e("./version");t.exports=r},{"./version":87}],85:[function(e,t,n){function r(e){return e&&"VirtualText"===e.type&&e.version===o}var o=e("./version");t.exports=r},{"./version":87}],86:[function(e,t,n){function r(e){return e&&"Widget"===e.type}t.exports=r},{}],87:[function(e,t,n){t.exports="2"},{}],88:[function(e,t,n){function r(e,t,n){this.type=Number(e),this.vNode=t,this.patch=n}var o=e("./version");r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,t.exports=r,r.prototype.version=o,r.prototype.type="VirtualPatch"},{"./version":87}],89:[function(e,t,n){function r(e,t){var n;for(var s in e){s in t||(n=n||{},n[s]=void 0);var u=e[s],c=t[s];if(u!==c)if(i(u)&&i(c))if(o(c)!==o(u))n=n||{},n[s]=c;else if(a(c))n=n||{},n[s]=c;else{var p=r(u,c);p&&(n=n||{},n[s]=p)}else n=n||{},n[s]=c}for(var l in t)l in e||(n=n||{},n[l]=t[l]);return n}function o(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var i=e("is-object"),a=e("../vnode/is-vhook");t.exports=r},{"../vnode/is-vhook":83,"is-object":71}],90:[function(e,t,n){function r(e,t){var n={a:e};return o(e,t,n,0),n}function o(e,t,n,r){if(e!==t){var o=n[r],s=!1;if(b(e)||b(t))u(e,t,n,r);else if(null==t)y(e)||(a(e,n,r),o=n[r]),o=h(o,new g(g.REMOVE,e,t));else if(k(t))if(k(e))if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var c=A(e.properties,t.properties);c&&(o=h(o,new g(g.PROPS,e,c))),o=i(e,t,n,o,r)}else o=h(o,new g(g.VNODE,e,t)),s=!0;else o=h(o,new g(g.VNODE,e,t)),s=!0;else x(t)?x(e)?e.text!==t.text&&(o=h(o,new g(g.VTEXT,e,t))):(o=h(o,new g(g.VTEXT,e,t)),s=!0):y(t)&&(y(e)||(s=!0),o=h(o,new g(g.WIDGET,e,t)));o&&(n[r]=o),s&&a(e,n,r)}}function i(e,t,n,r,i){for(var a=e.children,s=f(a,t.children),u=s.children,c=a.length,p=u.length,l=c>p?c:p,d=0;d<l;d++){var m=a[d],v=u[d];i+=1,m?o(m,v,n,i):v&&(r=h(r,new g(g.INSERT,null,v))),k(m)&&m.count&&(i+=m.count)}return s.moves&&(r=h(r,new g(g.ORDER,e,s.moves))),r}function a(e,t,n){p(e,t,n),s(e,t,n)}function s(e,t,n){if(y(e))"function"==typeof e.destroy&&(t[n]=h(t[n],new g(g.REMOVE,e,null)));else if(k(e)&&(e.hasWidgets||e.hasThunks))for(var r=e.children,o=r.length,i=0;i<o;i++){var a=r[i];n+=1,s(a,t,n),k(a)&&a.count&&(n+=a.count)}else b(e)&&u(e,null,t,n)}function u(e,t,n,o){var i=P(e,t),a=r(i.a,i.b);c(a)&&(n[o]=new g(g.THUNK,null,a))}function c(e){for(var t in e)if("a"!==t)return!0;return!1}function p(e,t,n){if(k(e)){if(e.hooks&&(t[n]=h(t[n],new g(g.PROPS,e,l(e.hooks)))),e.descendantHooks||e.hasThunks)for(var r=e.children,o=r.length,i=0;i<o;i++){var a=r[i];n+=1,p(a,t,n),k(a)&&a.count&&(n+=a.count)}}else b(e)&&u(e,null,t,n)}function l(e){var t={};for(var n in e)t[n]=void 0;return t}function f(e,t){var n=m(t),r=n.keys,o=n.free;if(o.length===t.length)return{children:t,moves:null};var i=m(e),a=i.keys,s=i.free;if(s.length===e.length)return{children:t,moves:null};for(var u=[],c=0,p=o.length,l=0,f=0;f<e.length;f++){var h,v=e[f];v.key?r.hasOwnProperty(v.key)?(h=r[v.key],u.push(t[h])):(h=f-l++,u.push(null)):c<p?(h=o[c++],u.push(t[h])):(h=f-l++,u.push(null))}for(var g=c>=o.length?t.length:o[c],k=0;k<t.length;k++){var x=t[k];x.key?a.hasOwnProperty(x.key)||u.push(x):k>=g&&u.push(x)}for(var y,b=u.slice(),P=0,A=[],E=[],T=0;T<t.length;){var w=t[T];for(y=b[P];null===y&&b.length;)A.push(d(b,P,null)),y=b[P];y&&y.key===w.key?(P++,T++):w.key?(y&&y.key&&r[y.key]!==T+1?(A.push(d(b,P,y.key)),y=b[P],y&&y.key===w.key?P++:E.push({key:w.key,to:T})):E.push({key:w.key,to:T}),T++):y&&y.key&&A.push(d(b,P,y.key))}for(;P<b.length;)y=b[P],A.push(d(b,P,y&&y.key));return A.length!==l||E.length?{children:u,moves:{removes:A,inserts:E}}:{children:u,moves:null}}function d(e,t,n){return e.splice(t,1),{from:t,key:n}}function m(e){for(var t={},n=[],r=e.length,o=0;o<r;o++){var i=e[o];i.key?t[i.key]=o:n.push(o)}return{keys:t,free:n}}function h(e,t){return e?(v(e)?e.push(t):e=[e,t],e):t}var v=e("x-is-array"),g=e("../vnode/vpatch"),k=e("../vnode/is-vnode"),x=e("../vnode/is-vtext"),y=e("../vnode/is-widget"),b=e("../vnode/is-thunk"),P=e("../vnode/handle-thunk"),A=e("./diff-props");t.exports=r},{"../vnode/handle-thunk":81,"../vnode/is-thunk":82,"../vnode/is-vnode":84,"../vnode/is-vtext":85,"../vnode/is-widget":86,"../vnode/vpatch":88,"./diff-props":89,"x-is-array":91}],91:[function(e,t,n){function r(e){return"[object Array]"===i.call(e)}var o=Array.isArray,i=Object.prototype.toString;t.exports=o||r},{}],92:[function(e,t,n){t.exports={name:"bars",version:"1.0.0",description:"Bars is a lightweight high performance HTML aware templating engine.",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/Mike96Angelo/Bars.git"},keywords:["bars","render","renderer","rendering","template","templating","html"],author:"Michaelangelo Jong",license:"MIT",bugs:{url:"https://github.com/Mike96Angelo/Bars/issues"},homepage:"https://github.com/Mike96Angelo/Bars#readme",dependencies:{compileit:"^1.0.1","generate-js":"^3.1.2",jquery:"^3.1.1"},devDependencies:{browserify:"^13.1.1",colors:"^1.1.2",gulp:"^3.9.1","gulp-minify":"0.0.14",stringify:"^5.1.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0","virtual-dom":"^2.1.1"}}},{}]},{},[1])(1)});